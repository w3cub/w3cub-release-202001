
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Query (Class) - CakePHP 3.8 - W3cubDocs</title>
  
  <meta name="description" content="Extends the base Query class to provide new methods related to association loading, automatic fields selection, automatic type casting and to wrap &hellip;">
  <meta name="keywords" content="class, query, -, cakephp, cakephp~3.8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/cakephp~3.8/class-cake.orm.query/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/cakephp~3.8.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cakephp~3.8/" class="_nav-link" title="" style="margin-left:0;">CakePHP 3.8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cakephp">
				
				
<h1>Class Query</h1>  <p>Extends the base Query class to provide new methods related to association loading, automatic fields selection, automatic type casting and to wrap results into a specific iterator that will be responsible for hydrating results if required.</p>  <dl class="tree"> <dd style="padding-left:0px"> <a href="../class-cake.database.query/"><span>Cake\Database\Query</span></a> implements <a href="../class-cake.database.expressioninterface/"><span>Cake\Database\ExpressionInterface</span></a>, <span>IteratorAggregate</span> uses <a href="../class-cake.database.typemaptrait/"><span>Cake\Database\TypeMapTrait</span></a> </dd> <dd style="padding-left:30px"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOAQMAAADKRNSsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFR3BMAAAAnyqEUQAAAAF0Uk5TAEDm2GYAAAATSURBVAjXY2BgYHDAi+o/MIABAEfyA/AA/BSgAAAAAElFTkSuQmCC" alt="Extended by"> <b><span>Cake\ORM\Query</span></b> implements <span>JsonSerializable</span>, <a href="../class-cake.datasource.queryinterface/"><span>Cake\Datasource\QueryInterface</span></a> uses <a href="../class-cake.datasource.querytrait/"><span>Cake\Datasource\QueryTrait</span></a> </dd> </dl> <div class="info"> <b>Namespace:</b> <a href="../namespace-cake/">Cake</a>\<a href="../namespace-cake.orm/">ORM</a><br> <b>See:</b> \Cake\Collection\CollectionInterface For a full description of the collection methods supported by this class<br> <b>Location:</b> <a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#28-1441" title="Go to source code" target="_blank">ORM/Query.php</a><br> </div>  <h2>Constants summary</h2> <ul class="member-summary constants"> <li class="clearfix">  <p class="attributes col-md-2 col-sm-2 p0"> <code>integer</code> </p> <div class="name col-md-10 col-sm-10"> <code><b>APPEND</b></code>  </div> <div class="col-md-10 col-md-offset-2"> <code><span class="php-num">0</span></code> </div> </li> <li class="clearfix">  <p class="attributes col-md-2 col-sm-2 p0"> <code>boolean</code> </p> <div class="name col-md-10 col-sm-10"> <code><b>OVERWRITE</b></code>  </div> <div class="col-md-10 col-md-offset-2"> <code><span class="php-keyword1">true</span></code> </div> </li> <li class="clearfix">  <p class="attributes col-md-2 col-sm-2 p0"> <code>integer</code> </p> <div class="name col-md-10 col-sm-10"> <code><b>PREPEND</b></code>  </div> <div class="col-md-10 col-md-offset-2"> <code><span class="php-num">1</span></code> </div> </li> </ul>   <h2>Inherited Constants</h2> <ul class="member-summary inherited"> <li> <code><a href="../class-cake.datasource.queryinterface/#JOIN_TYPE_INNER">JOIN_TYPE_INNER</a></code>, <code><a href="../class-cake.datasource.queryinterface/#JOIN_TYPE_LEFT">JOIN_TYPE_LEFT</a></code>, <code><a href="../class-cake.datasource.queryinterface/#JOIN_TYPE_RIGHT">JOIN_TYPE_RIGHT</a></code> </li> </ul>   <h2>Properties summary</h2> <ul class="member-summary properties"> <li class="clearfix"> <div class="name"> <code><a href="../class-cake.orm.query/#%24_autoFields">$_autoFields</a></code>  <span class="label">protected</span>  </div> <div class="property-type"><code>boolean</code></div>  <p>Tracks whether or not the original query should include fields from the top level table.</p>  </li> <li class="clearfix"> <div class="name"> <code><a href="../class-cake.orm.query/#%24_beforeFindFired">$_beforeFindFired</a></code>  <span class="label">protected</span>  </div> <div class="property-type"><code>boolean</code></div>  True if the beforeFind event has already been triggered for this query  </li> <li class="clearfix"> <div class="name"> <code><a href="../class-cake.orm.query/#%24_counter">$_counter</a></code>  <span class="label">protected</span>  </div> <div class="property-type"><code>callable</code></div>  <p>A callable function that can be used to calculate the total amount of records this query will match when not using <code>limit</code></p>  </li> <li class="clearfix"> <div class="name"> <code><a href="../class-cake.orm.query/#%24_eagerLoader">$_eagerLoader</a></code>  <span class="label">protected</span>  </div> <div class="property-type"><code><a href="../class-cake.orm.eagerloader/">Cake\ORM\EagerLoader</a></code></div>  <p>Instance of a class responsible for storing association containments and for eager loading them when this query is executed</p>  </li> <li class="clearfix"> <div class="name"> <code><a href="../class-cake.orm.query/#%24_hasFields">$_hasFields</a></code>  <span class="label">protected</span>  </div> <div class="property-type"><code>boolean</code></div>  <p>Whether the user select any fields before being executed, this is used to determined if any fields should be automatically be selected.</p>  </li> <li class="clearfix"> <div class="name"> <code><a href="../class-cake.orm.query/#%24_hydrate">$_hydrate</a></code>  <span class="label">protected</span>  </div> <div class="property-type"><code>boolean</code></div>  Whether to hydrate results into entity objects  </li> <li class="clearfix"> <div class="name"> <code><a href="../class-cake.orm.query/#%24_resultsCount">$_resultsCount</a></code>  <span class="label">protected</span>  </div> <div class="property-type"><code>integer|null</code></div>  The COUNT(*) for the query.  </li> </ul>   <h2>Inherited Properties</h2> <ul class="member-summary used"> <li> <code><a href="../class-cake.database.query/#%24_connection">_connection</a></code>, <code><a href="../class-cake.database.query/#%24_dirty">_dirty</a></code>, <code><a href="../class-cake.database.query/#%24_functionsBuilder">_functionsBuilder</a></code>, <code><a href="../class-cake.database.query/#%24_iterator">_iterator</a></code>, <code><a href="../class-cake.database.query/#%24_parts">_parts</a></code>, <code><a href="../class-cake.database.query/#%24_resultDecorators">_resultDecorators</a></code>, <code><a href="../class-cake.database.query/#%24_selectTypeMap">_selectTypeMap</a></code>, <code><a href="../class-cake.database.query/#%24_type">_type</a></code>, <code><a href="../class-cake.database.query/#%24_useBufferedResults">_useBufferedResults</a></code>, <code><a href="../class-cake.database.query/#%24_valueBinder">_valueBinder</a></code>, <code><a href="../class-cake.database.query/#%24typeCastEnabled">typeCastEnabled</a></code> <code><a href="../class-cake.database.typemaptrait/#%24_typeMap">_typeMap</a></code> <code><a href="../class-cake.datasource.querytrait/#%24_cache">_cache</a></code>, <code><a href="../class-cake.datasource.querytrait/#%24_eagerLoaded">_eagerLoaded</a></code>, <code><a href="../class-cake.datasource.querytrait/#%24_formatters">_formatters</a></code>, <code><a href="../class-cake.datasource.querytrait/#%24_mapReduce">_mapReduce</a></code>, <code><a href="../class-cake.datasource.querytrait/#%24_options">_options</a></code>, <code><a href="../class-cake.datasource.querytrait/#%24_repository">_repository</a></code>, <code><a href="../class-cake.datasource.querytrait/#%24_results">_results</a></code> </li> </ul>   <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#___call">__call()</a> <span class="label">public</span> </div>   </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#___clone">__clone()</a> <span class="label">public</span> </div>  Object clone hook.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#___construct">__construct()</a> <span class="label">public</span> </div>  Constructor  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#___debugInfo">__debugInfo()</a> <span class="label">public</span> </div>  <p>Returns an array that can be used to describe the internal state of this object.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#__addAssociationsToTypeMap">_addAssociationsToTypeMap()</a> <span class="label">protected</span> </div>  <p>Used to recursively add contained association column types to the query.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#__addDefaultFields">_addDefaultFields()</a> <span class="label">protected</span> </div>  <p>Inspects if there are any set fields for selecting, otherwise adds all the fields for the default table.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#__addDefaultSelectTypes">_addDefaultSelectTypes()</a> <span class="label">protected</span> </div>  Sets the default types for converting the fields in the select clause  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#__decorateResults">_decorateResults()</a> <span class="label">protected</span> </div>  Decorates the results iterator with MapReduce routines and formatters  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#__dirty">_dirty()</a> <span class="label">protected</span> </div>  <p>Marks a query as dirty, removing any preprocessed information from in memory caching such as previous results</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#__execute">_execute()</a> <span class="label">protected</span> </div>  <p>Executes this query and returns a ResultSet object containing the results. This will also setup the correct statement class in order to eager load deep associations.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#__performCount">_performCount()</a> <span class="label">protected</span> </div>  Performs and returns the COUNT(*) for the query.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#__transformQuery">_transformQuery()</a> <span class="label">protected</span> </div>  Applies some defaults to the query object before it is executed.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_addDefaultTypes">addDefaultTypes()</a> <span class="label">public</span> </div>  <p>Hints this object to associate the correct types when casting conditions for the database. This is done by extracting the field types from the schema associated to the passed table object. This prevents the user from repeating themselves when specifying conditions.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_all">all()</a> <span class="label">public</span> </div>  Fetch the results for this query.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_applyOptions">applyOptions()</a> <span class="label">public</span> </div>  <p>Populates or adds parts to current query clauses using an array. This is handy for passing all query clauses at once. The option array accepts:</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_autoFields">autoFields()</a> <span class="label">public</span> <span class="label">deprecated</span> </div>  Get/Set whether or not the ORM should automatically append fields.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_cache">cache()</a> <span class="label">public</span> </div>   </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_cleanCopy">cleanCopy()</a> <span class="label">public</span> </div>  Creates a copy of this current query, triggers beforeFind and resets some state.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_clearContain">clearContain()</a> <span class="label">public</span> </div>  Clears the contained associations from the current query.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_contain">contain()</a> <span class="label">public</span> </div>  <p>Sets the list of associations that should be eagerly loaded along with this query. The list of associated tables passed must have been previously set as associations using the Table API.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_count">count()</a> <span class="label">public</span> </div>  Returns the total amount of results for the query.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_counter">counter()</a> <span class="label">public</span> </div>  <p>Registers a callable function that will be executed when the <code>count</code> method in this query is called. The return value for the function will be set as the return value of the <code>count</code> method.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_delete">delete()</a> <span class="label">public</span> </div>  Create a delete query.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_disableAutoFields">disableAutoFields()</a> <span class="label">public</span> </div>  Disables automatically appending fields.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_disableHydration">disableHydration()</a> <span class="label">public</span> </div>  Disable hydrating entities.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_eagerLoader">eagerLoader()</a> <span class="label">public</span> <span class="label">deprecated</span> </div>  <p>Sets the instance of the eager loader class to use for loading associations and storing containments. If called with no arguments, it will return the currently configured instance.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_enableAutoFields">enableAutoFields()</a> <span class="label">public</span> </div>  Sets whether or not the ORM should automatically append fields.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_enableHydration">enableHydration()</a> <span class="label">public</span> </div>  Toggle hydrating entities.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_find">find()</a> <span class="label">public</span> </div>  Apply custom finds to against an existing query object.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_getContain">getContain()</a> <span class="label">public</span> </div>   </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_getEagerLoader">getEagerLoader()</a> <span class="label">public</span> </div>  Returns the currently configured instance.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_hydrate">hydrate()</a> <span class="label">public</span> <span class="label">deprecated</span> </div>  Toggle hydrating entities.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_innerJoinWith">innerJoinWith()</a> <span class="label">public</span> </div>  <p>Creates an INNER JOIN with the passed association table while preserving the foreign key matching and the custom conditions that were originally set for it.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_insert">insert()</a> <span class="label">public</span> </div>  Create an insert query.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_isAutoFieldsEnabled">isAutoFieldsEnabled()</a> <span class="label">public</span> </div>  Gets whether or not the ORM should automatically append fields.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_isHydrationEnabled">isHydrationEnabled()</a> <span class="label">public</span> </div>  Returns the current hydration mode.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_jsonSerialize">jsonSerialize()</a> <span class="label">public</span> </div>  Executes the query and converts the result set into JSON.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_leftJoinWith">leftJoinWith()</a> <span class="label">public</span> </div>  <p>Creates a LEFT JOIN with the passed association table while preserving the foreign key matching and the custom conditions that were originally set for it.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_matching">matching()</a> <span class="label">public</span> </div>  <p>Adds filtering conditions to this query to only bring rows that have a relation to another from an associated table, based on conditions in the associated table.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_notMatching">notMatching()</a> <span class="label">public</span> </div>  <p>Adds filtering conditions to this query to only bring rows that have no match to another from an associated table, based on conditions in the associated table.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_select">select()</a> <span class="label">public</span> </div>  <p>Adds new fields to be returned by a <code>SELECT</code> statement when this query is executed. Fields can be passed as an array of strings, array of expression objects, a single expression or a single string.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_selectAllExcept">selectAllExcept()</a> <span class="label">public</span> </div>  <p>All the fields associated with the passed table except the excluded fields will be added to the select clause of the query. Passed excluded fields should not be aliased. After the first call to this method, a second call cannot be used to remove fields that have already been added to the query by the first. If you need to change the list after the first call, pass overwrite boolean true which will reset the select clause removing all previous additions.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_setEagerLoader">setEagerLoader()</a> <span class="label">public</span> </div>  <p>Sets the instance of the eager loader class to use for loading associations and storing containments.</p>  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_sql">sql()</a> <span class="label">public</span> </div>  Returns the SQL representation of this object.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_triggerBeforeFind">triggerBeforeFind()</a> <span class="label">public</span> </div>  Trigger the beforeFind event on the query's repository object.  </li> <li class="clearfix"> <div> <a href="../class-cake.orm.query/#_update">update()</a> <span class="label">public</span> </div>  Create an update query.  </li> </ul>   <h2>Method Detail</h2> <div class="method-detail">   <h3 class="method-name" id="___call"> <span class="name">__call()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1313-1327" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">__call( $method , $arguments )</pre>  <h4>Throws</h4>  BadMethodCallException<br>if the method is called for a non-select query<br>   </div> <div class="method-detail">   <h3 class="method-name" id="___clone"> <span class="name">__clone()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#881-894" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">__clone( )</pre>  <p>Object clone hook.</p> <p>Destroys the clones inner iterator and clones the value binder, and eagerloader instances.</p> <h4>Overrides</h4> <code><a href="../class-cake.database.query/#___clone">Cake\Database\Query::__clone()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="___construct"> <span class="name">__construct()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#155-169" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">__construct( Cake\Database\Connection $connection , Cake\ORM\Table $table )</pre>  <p>Constructor</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.database.connection/">Cake\Database\Connection</a></code> <code>$connection</code> </dt> <dd>The connection object</dd> <dt> <code><a href="../class-cake.orm.table/">Cake\ORM\Table</a></code> <code>$table</code> </dt> <dd>The table this query is starting on</dd> </dl>  <h4>Overrides</h4> <code><a href="../class-cake.database.query/#___construct">Cake\Database\Query::__construct()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="___debugInfo"> <span class="name">__debugInfo()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1329-1346" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">__debugInfo( )</pre>  <p>Returns an array that can be used to describe the internal state of this object.</p> <h4>Returns</h4>  array<br>  <h4>Overrides</h4> <code><a href="../class-cake.database.query/#___debugInfo">Cake\Database\Query::__debugInfo()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="__addAssociationsToTypeMap"> <span class="name">_addAssociationsToTypeMap()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#504-530" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_addAssociationsToTypeMap( Cake\ORM\Table $table , Cake\Database\TypeMap $typeMap , array $associations )</pre>  <p>Used to recursively add contained association column types to the query.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.orm.table/">Cake\ORM\Table</a></code> <code>$table</code> </dt> <dd>The table instance to pluck associations from.</dd> <dt> <code><a href="../class-cake.database.typemap/">Cake\Database\TypeMap</a></code> <code>$typeMap</code> </dt> <dd><p>The typemap to check for columns in. This typemap is indirectly mutated via Cake\ORM\Query::addDefaultTypes()</p></dd> <dt> array <code>$associations</code> </dt> <dd>The nested tree of associations to walk.</dd> </dl>   </div> <div class="method-detail">   <h3 class="method-name" id="__addDefaultFields"> <span class="name">_addDefaultFields()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1175-1197" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_addDefaultFields( )</pre>  <p>Inspects if there are any set fields for selecting, otherwise adds all the fields for the default table.</p>  </div> <div class="method-detail">   <h3 class="method-name" id="__addDefaultSelectTypes"> <span class="name">_addDefaultSelectTypes()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1199-1223" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_addDefaultSelectTypes( )</pre>  <p>Sets the default types for converting the fields in the select clause</p>  </div> <div class="method-detail">   <h3 class="method-name" id="__decorateResults"> <span class="name">_decorateResults()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1424-1440" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_decorateResults( Traversable $result )</pre>  <p>Decorates the results iterator with MapReduce routines and formatters</p> <h4>Parameters</h4>  <dl> <dt> Traversable <code>$result</code> </dt> <dd>Original results</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.datasource.resultsetinterface/">Cake\Datasource\ResultSetInterface</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="__dirty"> <span class="name">_dirty()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1238-1249" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_dirty( )</pre>  <p>Marks a query as dirty, removing any preprocessed information from in memory caching such as previous results</p> <h4>Overrides</h4> <code><a href="../class-cake.database.query/#__dirty">Cake\Database\Query::_dirty()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="__execute"> <span class="name">_execute()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1125-1144" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_execute( )</pre>  <p>Executes this query and returns a ResultSet object containing the results. This will also setup the correct statement class in order to eager load deep associations.</p> <h4>Returns</h4>  <code><a href="../class-cake.orm.resultset/">Cake\ORM\ResultSet</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="__performCount"> <span class="name">_performCount()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#912-968" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_performCount( )</pre>  <p>Performs and returns the COUNT(*) for the query.</p> <h4>Returns</h4>  integer<br>   </div> <div class="method-detail">   <h3 class="method-name" id="__transformQuery"> <span class="name">_transformQuery()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1146-1173" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_transformQuery( )</pre>  <p>Applies some defaults to the query object before it is executed.</p> <p>Specifically add the FROM clause, adds default table fields if none are specified and applies the joins required to eager load associations defined using <code>contain</code></p> <p>It also sets the default types for the columns in the select clause</p> <h4>See</h4>  \Cake\Database\Query::execute()<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_addDefaultTypes"> <span class="name">addDefaultTypes()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#255-277" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">addDefaultTypes( Cake\ORM\Table $table )</pre>  <p>Hints this object to associate the correct types when casting conditions for the database. This is done by extracting the field types from the schema associated to the passed table object. This prevents the user from repeating themselves when specifying conditions.</p> <p>This method returns the same query object for chaining.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.orm.table/">Cake\ORM\Table</a></code> <code>$table</code> </dt> <dd>The table to pull types from</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_all"> <span class="name">all()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1075-1089" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">all( )</pre>  <p>Fetch the results for this query.</p> <h4>Returns</h4>  <code><a href="../class-cake.datasource.resultsetinterface/">Cake\Datasource\ResultSetInterface</a></code><br>  <h4>Throws</h4>  RuntimeException<br>if this method is called on a non-select Query.<br>  <h4>Implementation of</h4> <code><a href="../class-cake.datasource.queryinterface/#_all">Cake\Datasource\QueryInterface::all()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_applyOptions"> <span class="name">applyOptions()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#782-845" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">applyOptions( array $options )</pre>  <p>Populates or adds parts to current query clauses using an array. This is handy for passing all query clauses at once. The option array accepts:</p> <p>Populates or adds parts to current query clauses using an array. This is handy for passing all query clauses at once. The option array accepts:</p> <ul> <li>fields: Maps to the select method</li> <li>conditions: Maps to the where method</li> <li>limit: Maps to the limit method</li> <li>order: Maps to the order method</li> <li>offset: Maps to the offset method</li> <li>group: Maps to the group method</li> <li>having: Maps to the having method</li> <li>contain: Maps to the contain options for eager loading</li> <li>join: Maps to the join method</li> <li>page: Maps to the page method</li> </ul> <h3>Example:</h3> <pre data-language="php">$query-&gt;applyOptions([
  'fields' =&gt; ['id', 'name'],
  'conditions' =&gt; [
    'created &gt;=' =&gt; '2013-01-01'
  ],
  'limit' =&gt; 10
]);</pre> <p>Is equivalent to:</p> <pre data-language="php">$query
  -&gt;select(['id', 'name'])
  -&gt;where(['created &gt;=' =&gt; '2013-01-01'])
  -&gt;limit(10)</pre> <h4>Parameters</h4>  <dl> <dt> array <code>$options</code> </dt> <dd>list of query clauses to apply new parts to.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>Implementation of</h4> <code><a href="../class-cake.datasource.queryinterface/#_applyOptions">Cake\Datasource\QueryInterface::applyOptions()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_autoFields"> <span class="name">autoFields()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1401-1422" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">autoFields( boolean|null $value = null )</pre>  <p>Get/Set whether or not the ORM should automatically append fields.</p> <p>By default calling select() will disable auto-fields. You can re-enable auto-fields with this method.</p> <h4>Deprecated</h4>  3.4.0 Use enableAutoFields()/isAutoFieldsEnabled() instead.<br>  <h4>Parameters</h4>  <dl> <dt> boolean|null <code>$value</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The value to set or null to read the current value.</dd> </dl>  <h4>Returns</h4>  boolean|<code><a href="../class-cake.orm.query/">Cake\ORM\Query</a></code><br>$this Either the current value or the query object.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_cache"> <span class="name">cache()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1060-1073" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">cache( $key , $config = 'default' )</pre>  <h4>Returns</h4>  <br>$this<br>  <h4>Throws</h4>  RuntimeException<br>When you attempt to cache a non-select query.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_cleanCopy"> <span class="name">cleanCopy()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#847-879" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">cleanCopy( )</pre>  <p>Creates a copy of this current query, triggers beforeFind and resets some state.</p> <p>The following state will be cleared:</p> <ul> <li>autoFields</li> <li>limit</li> <li>offset</li> <li>map/reduce functions</li> <li>result formatters</li> <li>order</li> <li>containments</li> </ul> <p>This method creates query clones that are useful when working with subqueries.</p> <h4>Returns</h4>  <code><a href="../class-cake.orm.query/">Cake\ORM\Query</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_clearContain"> <span class="name">clearContain()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#491-502" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">clearContain( )</pre>  <p>Clears the contained associations from the current query.</p> <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_contain"> <span class="name">contain()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#330-481" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">contain( array|string|null $associations = null , callable|boolean $override = false )</pre>  <p>Sets the list of associations that should be eagerly loaded along with this query. The list of associated tables passed must have been previously set as associations using the Table API.</p> <h3>Example:</h3> <pre data-language="php">// Bring articles' author information
$query-&gt;contain('Author');

// Also bring the category and tags associated to each article
$query-&gt;contain(['Category', 'Tag']);</pre> <p>Associations can be arbitrarily nested using dot notation or nested arrays, this allows this object to calculate joins or any additional queries that must be executed to bring the required associated data.</p> <h3>Example:</h3> <pre data-language="php">// Eager load the product info, and for each product load other 2 associations
$query-&gt;contain(['Product' =&gt; ['Manufacturer', 'Distributor']);

// Which is equivalent to calling
$query-&gt;contain(['Products.Manufactures', 'Products.Distributors']);

// For an author query, load his region, state and country
$query-&gt;contain('Regions.States.Countries');</pre> <p>It is possible to control the conditions and fields selected for each of the contained associations:</p> <h3>Example:</h3> <pre data-language="php">$query-&gt;contain(['Tags' =&gt; function ($q) {
    return $q-&gt;where(['Tags.is_popular' =&gt; true]);
}]);

$query-&gt;contain(['Products.Manufactures' =&gt; function ($q) {
    return $q-&gt;select(['name'])-&gt;where(['Manufactures.active' =&gt; true]);
}]);</pre> <p>Each association might define special options when eager loaded, the allowed options that can be set per association are:</p> <ul> <li>
<code>foreignKey</code>: Used to set a different field to match both tables, if set to false no join conditions will be generated automatically. <code>false</code> can only be used on joinable associations and cannot be used with hasMany or belongsToMany associations.</li> <li>
<code>fields</code>: An array with the fields that should be fetched from the association.</li> <li>
<code>finder</code>: The finder to use when loading associated records. Either the name of the finder as a string, or an array to define options to pass to the finder.</li> <li>
<code>queryBuilder</code>: Equivalent to passing a callable instead of an options array.</li> </ul> <h3>Example:</h3> <pre data-language="php">// Set options for the hasMany articles that will be eagerly loaded for an author
$query-&gt;contain([
    'Articles' =&gt; [
        'fields' =&gt; ['title', 'author_id']
    ]
]);</pre> <p>Finders can be configured to use options.</p> <pre data-language="php">// Retrieve translations for the articles, but only those for the `en` and `es` locales
$query-&gt;contain([
    'Articles' =&gt; [
        'finder' =&gt; [
            'translations' =&gt; [
                'locales' =&gt; ['en', 'es']
            ]
        ]
    ]
]);</pre> <p>When containing associations, it is important to include foreign key columns. Failing to do so will trigger exceptions.</p> <pre data-language="php">// Use a query builder to add conditions to the containment
$query-&gt;contain('Authors', function ($q) {
    return $q-&gt;where(...); // add conditions
});
// Use special join conditions for multiple containments in the same method call
$query-&gt;contain([
    'Authors' =&gt; [
        'foreignKey' =&gt; false,
        'queryBuilder' =&gt; function ($q) {
            return $q-&gt;where(...); // Add full filtering conditions
        }
    ],
    'Tags' =&gt; function ($q) {
        return $q-&gt;where(...); // add conditions
    }
]);</pre> <p>If called with no arguments, this function will return an array with with the list of previously configured associations to be contained in the result. This getter part is deprecated as of 3.6.0. Use getContain() instead.</p> <p>If called with an empty first argument and <code>$override</code> is set to true, the previous list will be emptied.</p> <h4>Parameters</h4>  <dl> <dt> array|string|null <code>$associations</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>List of table aliases to be queried.</dd> <dt> callable|boolean <code>$override</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd><p>The query builder for the association, or if associations is an array, a bool on whether to override previous list with the one passed defaults to merging previous list with the new one.</p></dd> </dl>  <h4>Returns</h4>  array|<code><a href="../class-cake.orm.query/">Cake\ORM\Query</a></code><br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_count"> <span class="name">count()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#896-910" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">count( )</pre>  <p>Returns the total amount of results for the query.</p> <p>Returns the COUNT(*) for the query. If the query has not been modified, and the count has already been performed the cached value is returned</p> <h4>Returns</h4>  integer<br>  <h4>Implementation of</h4> <code><a href="../class-cake.datasource.queryinterface/#_count">Cake\Datasource\QueryInterface::count()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_counter"> <span class="name">counter()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#970-993" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">counter( callable|null $counter )</pre>  <p>Registers a callable function that will be executed when the <code>count</code> method in this query is called. The return value for the function will be set as the return value of the <code>count</code> method.</p> <p>This is particularly useful when you need to optimize a query for returning the count, for example removing unnecessary joins, removing group by or just return an estimated number of rows.</p> <p>The callback will receive as first argument a clone of this query and not this query itself.</p> <p>If the first param is a null value, the built-in counter function will be called instead</p> <h4>Parameters</h4>  <dl> <dt> callable|null <code>$counter</code> </dt> <dd>The counter value</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_delete"> <span class="name">delete()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1271-1288" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">delete( string|null $table = null )</pre>  <p>Create a delete query.</p> <p>This changes the query type to be 'delete'. Can be combined with the where() method to create delete queries.</p> <h4>Parameters</h4>  <dl> <dt> string|null <code>$table</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>Unused parameter.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>Overrides</h4> <code><a href="../class-cake.database.query/#_delete">Cake\Database\Query::delete()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_disableAutoFields"> <span class="name">disableAutoFields()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1376-1386" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">disableAutoFields( )</pre>  <p>Disables automatically appending fields.</p> <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_disableHydration"> <span class="name">disableHydration()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1011-1025" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">disableHydration( )</pre>  <p>Disable hydrating entities.</p> <p>Disabling hydration will cause array results to be returned for the query instead of entities.</p> <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_eagerLoader"> <span class="name">eagerLoader()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#307-328" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">eagerLoader( Cake\ORM\EagerLoader $instance = null )</pre>  <p>Sets the instance of the eager loader class to use for loading associations and storing containments. If called with no arguments, it will return the currently configured instance.</p> <h4>Deprecated</h4>  3.4.0 Use setEagerLoader()/getEagerLoader() instead.<br>  <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.orm.eagerloader/">Cake\ORM\EagerLoader</a></code> <code>$instance</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>The eager loader to use. Pass null to get the current eagerloader.</p></dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.orm.eagerloader/">Cake\ORM\EagerLoader</a></code>|<code><a href="../class-cake.orm.query/">Cake\ORM\Query</a></code><br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_enableAutoFields"> <span class="name">enableAutoFields()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1360-1374" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">enableAutoFields( boolean $value = true )</pre>  <p>Sets whether or not the ORM should automatically append fields.</p> <p>By default calling select() will disable auto-fields. You can re-enable auto-fields with this method.</p> <h4>Parameters</h4>  <dl> <dt> boolean <code>$value</code> <span class="label">optional</span> <span class="php-keyword1">true</span> </dt> <dd>Set true to enable, false to disable.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_enableHydration"> <span class="name">enableHydration()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#995-1009" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">enableHydration( boolean $enable = true )</pre>  <p>Toggle hydrating entities.</p> <p>If set to false array results will be returned for the query.</p> <h4>Parameters</h4>  <dl> <dt> boolean <code>$enable</code> <span class="label">optional</span> <span class="php-keyword1">true</span> </dt> <dd>Use a boolean to set the hydration mode.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_find"> <span class="name">find()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1225-1236" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">find( string $finder , array $options = [] )</pre>  <p>Apply custom finds to against an existing query object.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$finder</code> </dt> <dd>The finder method to use.</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>The options for the finder.</dd> </dl>  <h4>Returns</h4>  <br>$this Returns a modified query.<br>  <h4>See</h4>  \Cake\ORM\Table::find()<br>  <h4>Implementation of</h4> <code><a href="../class-cake.datasource.queryinterface/#_find">Cake\Datasource\QueryInterface::find()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_getContain"> <span class="name">getContain()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#483-489" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getContain( )</pre>  <h4>Returns</h4>  array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getEagerLoader"> <span class="name">getEagerLoader()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#293-305" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getEagerLoader( )</pre>  <p>Returns the currently configured instance.</p> <h4>Returns</h4>  <code><a href="../class-cake.orm.eagerloader/">Cake\ORM\EagerLoader</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_hydrate"> <span class="name">hydrate()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1037-1058" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">hydrate( boolean|null $enable = null )</pre>  <p>Toggle hydrating entities.</p> <p>If set to false array results will be returned.</p> <h4>Deprecated</h4>  3.4.0 Use enableHydration()/isHydrationEnabled() instead.<br>  <h4>Parameters</h4>  <dl> <dt> boolean|null <code>$enable</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>Use a boolean to set the hydration mode. Null will fetch the current hydration mode.</p></dd> </dl>  <h4>Returns</h4>  boolean|<code><a href="../class-cake.orm.query/">Cake\ORM\Query</a></code><br>$this A boolean when reading, and $this when setting the mode.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_innerJoinWith"> <span class="name">innerJoinWith()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#668-715" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">innerJoinWith( string $assoc , callable $builder = null )</pre>  <p>Creates an INNER JOIN with the passed association table while preserving the foreign key matching and the custom conditions that were originally set for it.</p> <p>This function will add entries in the <code>contain</code> graph.</p> <h3>Example:</h3> <pre data-language="php">// Bring only articles that were tagged with 'cake'
$query-&gt;innerJoinWith('Tags', function ($q) {
    return $q-&gt;where(['name' =&gt; 'cake']);
);</pre> <p>This will create the following SQL:</p> <pre data-language="php">SELECT Articles.*
FROM articles Articles
INNER JOIN tags Tags ON Tags.name = 'cake'
INNER JOIN articles_tags ArticlesTags ON ArticlesTags.tag_id = Tags.id
  AND ArticlesTags.articles_id = Articles.id</pre> <p>This function works the same as <code>matching()</code> with the difference that it will select no fields from the association.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$assoc</code> </dt> <dd>The association to join with</dd> <dt> callable <code>$builder</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>a function that will receive a pre-made query object that can be used to add custom conditions or selecting some fields</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>See</h4>  \Cake\ORM\Query::matching()<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_insert"> <span class="name">insert()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1290-1311" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">insert( array $columns , array $types = [] )</pre>  <p>Create an insert query.</p> <p>This changes the query type to be 'insert'. Note calling this method will reset any data previously set with Query::values()</p> <p>Can be combined with the where() method to create delete queries.</p> <h4>Parameters</h4>  <dl> <dt> array <code>$columns</code> </dt> <dd>The columns to insert into.</dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>A map between columns &amp; their datatypes.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>Throws</h4>  RuntimeException<br>When there are 0 columns.<br>  <h4>Overrides</h4> <code><a href="../class-cake.database.query/#_insert">Cake\Database\Query::insert()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_isAutoFieldsEnabled"> <span class="name">isAutoFieldsEnabled()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1388-1399" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">isAutoFieldsEnabled( )</pre>  <p>Gets whether or not the ORM should automatically append fields.</p> <p>By default calling select() will disable auto-fields. You can re-enable auto-fields with enableAutoFields().</p> <h4>Returns</h4>  boolean<br>The current value.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_isHydrationEnabled"> <span class="name">isHydrationEnabled()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1027-1035" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">isHydrationEnabled( )</pre>  <p>Returns the current hydration mode.</p> <h4>Returns</h4>  boolean<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_jsonSerialize"> <span class="name">jsonSerialize()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1348-1358" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">jsonSerialize( )</pre>  <p>Executes the query and converts the result set into JSON.</p> <p>Part of JsonSerializable interface.</p> <h4>Returns</h4>  <code><a href="../class-cake.datasource.resultsetinterface/">Cake\Datasource\ResultSetInterface</a></code><br>The data to convert to JSON.<br>  <h4>Implementation of</h4> <code>JsonSerializable::jsonSerialize()</code>  </div> <div class="method-detail">   <h3 class="method-name" id="_leftJoinWith"> <span class="name">leftJoinWith()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#591-666" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">leftJoinWith( string $assoc , callable $builder = null )</pre>  <p>Creates a LEFT JOIN with the passed association table while preserving the foreign key matching and the custom conditions that were originally set for it.</p> <p>This function will add entries in the <code>contain</code> graph.</p> <h3>Example:</h3> <pre data-language="php">// Get the count of articles per user
$usersQuery
    -&gt;select(['total_articles' =&gt; $query-&gt;func()-&gt;count('Articles.id')])
    -&gt;leftJoinWith('Articles')
    -&gt;group(['Users.id'])
    -&gt;enableAutoFields(true);</pre> <p>You can also customize the conditions passed to the LEFT JOIN:</p> <pre data-language="php">// Get the count of articles per user with at least 5 votes
$usersQuery
    -&gt;select(['total_articles' =&gt; $query-&gt;func()-&gt;count('Articles.id')])
    -&gt;leftJoinWith('Articles', function ($q) {
        return $q-&gt;where(['Articles.votes &gt;=' =&gt; 5]);
    })
    -&gt;group(['Users.id'])
    -&gt;enableAutoFields(true);</pre> <p>This will create the following SQL:</p> <pre data-language="php">SELECT COUNT(Articles.id) AS total_articles, Users.*
FROM users Users
LEFT JOIN articles Articles ON Articles.user_id = Users.id AND Articles.votes &gt;= 5
GROUP BY USers.id</pre> <p>It is possible to left join deep associations by using dot notation</p> <h3>Example:</h3> <pre data-language="php">// Total comments in articles by 'markstory'
$query
 -&gt;select(['total_comments' =&gt; $query-&gt;func()-&gt;count('Comments.id')])
 -&gt;leftJoinWith('Comments.Users', function ($q) {
    return $q-&gt;where(['username' =&gt; 'markstory']);
)
-&gt;group(['Users.id']);</pre> <p>Please note that the query passed to the closure will only accept calling <code>select</code>, <code>where</code>, <code>andWhere</code> and <code>orWhere</code> on it. If you wish to add more complex clauses you can do it directly in the main query.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$assoc</code> </dt> <dd>The association to join with</dd> <dt> callable <code>$builder</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>a function that will receive a pre-made query object that can be used to add custom conditions or selecting some fields</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_matching"> <span class="name">matching()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#532-589" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">matching( string $assoc , callable $builder = null )</pre>  <p>Adds filtering conditions to this query to only bring rows that have a relation to another from an associated table, based on conditions in the associated table.</p> <p>This function will add entries in the <code>contain</code> graph.</p> <h3>Example:</h3> <pre data-language="php">// Bring only articles that were tagged with 'cake'
$query-&gt;matching('Tags', function ($q) {
    return $q-&gt;where(['name' =&gt; 'cake']);
);</pre> <p>It is possible to filter by deep associations by using dot notation:</p> <h3>Example:</h3> <pre data-language="php">// Bring only articles that were commented by 'markstory'
$query-&gt;matching('Comments.Users', function ($q) {
    return $q-&gt;where(['username' =&gt; 'markstory']);
);</pre> <p>As this function will create <code>INNER JOIN</code>, you might want to consider calling <code>distinct</code> on this query as you might get duplicate rows if your conditions don't filter them already. This might be the case, for example, of the same user commenting more than once in the same article.</p> <h3>Example:</h3> <pre data-language="php">// Bring unique articles that were commented by 'markstory'
$query-&gt;distinct(['Articles.id'])
-&gt;matching('Comments.Users', function ($q) {
    return $q-&gt;where(['username' =&gt; 'markstory']);
);</pre> <p>Please note that the query passed to the closure will only accept calling <code>select</code>, <code>where</code>, <code>andWhere</code> and <code>orWhere</code> on it. If you wish to add more complex clauses you can do it directly in the main query.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$assoc</code> </dt> <dd>The association to filter by</dd> <dt> callable <code>$builder</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>a function that will receive a pre-made query object that can be used to add custom conditions or selecting some fields</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_notMatching"> <span class="name">notMatching()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#717-780" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">notMatching( string $assoc , callable $builder = null )</pre>  <p>Adds filtering conditions to this query to only bring rows that have no match to another from an associated table, based on conditions in the associated table.</p> <p>This function will add entries in the <code>contain</code> graph.</p> <h3>Example:</h3> <pre data-language="php">// Bring only articles that were not tagged with 'cake'
$query-&gt;notMatching('Tags', function ($q) {
    return $q-&gt;where(['name' =&gt; 'cake']);
);</pre> <p>It is possible to filter by deep associations by using dot notation:</p> <h3>Example:</h3> <pre data-language="php">// Bring only articles that weren't commented by 'markstory'
$query-&gt;notMatching('Comments.Users', function ($q) {
    return $q-&gt;where(['username' =&gt; 'markstory']);
);</pre> <p>As this function will create a <code>LEFT JOIN</code>, you might want to consider calling <code>distinct</code> on this query as you might get duplicate rows if your conditions don't filter them already. This might be the case, for example, of the same article having multiple comments.</p> <h3>Example:</h3> <pre data-language="php">// Bring unique articles that were commented by 'markstory'
$query-&gt;distinct(['Articles.id'])
-&gt;notMatching('Comments.Users', function ($q) {
    return $q-&gt;where(['username' =&gt; 'markstory']);
);</pre> <p>Please note that the query passed to the closure will only accept calling <code>select</code>, <code>where</code>, <code>andWhere</code> and <code>orWhere</code> on it. If you wish to add more complex clauses you can do it directly in the main query.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$assoc</code> </dt> <dd>The association to filter by</dd> <dt> callable <code>$builder</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>a function that will receive a pre-made query object that can be used to add custom conditions or selecting some fields</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_select"> <span class="name">select()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#171-222" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">select( array|Cake\Database\ExpressionInterface|callable|string|Cake\ORM\Table|Cake\ORM\Association $fields = [] , boolean $overwrite = false )</pre>  <p>Adds new fields to be returned by a <code>SELECT</code> statement when this query is executed. Fields can be passed as an array of strings, array of expression objects, a single expression or a single string.</p> <p>If an array is passed, keys will be used to alias fields using the value as the real field to be aliased. It is possible to alias strings, Expression objects or even other Query objects.</p> <p>If a callable function is passed, the returning array of the function will be used as the list of fields.</p> <p>By default this function will append any passed argument to the list of fields to be selected, unless the second argument is set to true.</p> <h3>Examples:</h3> <pre data-language="php">$query-&gt;select(['id', 'title']); // Produces SELECT id, title
$query-&gt;select(['author' =&gt; 'author_id']); // Appends author: SELECT id, title, author_id as author
$query-&gt;select('id', true); // Resets the list: SELECT id
$query-&gt;select(['total' =&gt; $countQuery]); // SELECT id, (SELECT ...) AS total
$query-&gt;select(function ($query) {
    return ['article_id', 'total' =&gt; $query-&gt;count('*')];
})</pre> <p>By default no fields are selected, if you have an instance of <code>Cake\ORM\Query</code> and try to append fields you should also call <code>Cake\ORM\Query::enableAutoFields()</code> to select the default fields from the table.</p> <p>If you pass an instance of a <code>Cake\ORM\Table</code> or <code>Cake\ORM\Association</code> class, all the fields in the schema of the table or the association will be added to the select clause.</p> <h4>Parameters</h4>  <dl> <dt> array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable|string|<code><a href="../class-cake.orm.table/">Cake\ORM\Table</a></code>|<code><a href="../class-cake.orm.association/">Cake\ORM\Association</a></code> <code>$fields</code> <span class="label">optional</span> [] </dt> <dd><p>fields to be added to the list.</p></dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset fields with passed list or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>Overrides</h4> <code><a href="../class-cake.database.query/#_select">Cake\Database\Query::select()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_selectAllExcept"> <span class="name">selectAllExcept()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#224-253" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">selectAllExcept( Cake\ORM\Table|Cake\ORM\Association $table , array $excludedFields , boolean $overwrite = false )</pre>  <p>All the fields associated with the passed table except the excluded fields will be added to the select clause of the query. Passed excluded fields should not be aliased. After the first call to this method, a second call cannot be used to remove fields that have already been added to the query by the first. If you need to change the list after the first call, pass overwrite boolean true which will reset the select clause removing all previous additions.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.orm.table/">Cake\ORM\Table</a></code>|<code><a href="../class-cake.orm.association/">Cake\ORM\Association</a></code> <code>$table</code> </dt> <dd>The table to use to get an array of columns</dd> <dt> array <code>$excludedFields</code> </dt> <dd>The un-aliased column names you do not want selected from $table</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>Whether to reset/remove previous selected fields</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.orm.query/">Cake\ORM\Query</a></code><br>  <h4>Throws</h4>  InvalidArgumentException<br>If Association|Table is not passed in first argument<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_setEagerLoader"> <span class="name">setEagerLoader()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#279-291" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">setEagerLoader( Cake\ORM\EagerLoader $instance )</pre>  <p>Sets the instance of the eager loader class to use for loading associations and storing containments.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.orm.eagerloader/">Cake\ORM\EagerLoader</a></code> <code>$instance</code> </dt> <dd>The eager loader to use.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_sql"> <span class="name">sql()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1113-1123" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">sql( Cake\Database\ValueBinder $binder = null )</pre>  <p>Returns the SQL representation of this object.</p> <h4>Parameters</h4>  <dl> <dt> Cake\Database\ValueBinder <code>$binder</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>$generator A placeholder object that will hold associated values for expressions</p></dd> </dl>  <h4>Returns</h4>  string<br>  <h4>Overrides</h4> <code><a href="../class-cake.database.query/#_sql">Cake\Database\Query::sql()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_triggerBeforeFind"> <span class="name">triggerBeforeFind()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1091-1111" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">triggerBeforeFind( )</pre>  <p>Trigger the beforeFind event on the query's repository object.</p> <p>Will not trigger more than once, and only for select queries.</p>  </div> <div class="method-detail">   <h3 class="method-name" id="_update"> <span class="name">update()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#1251-1269" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">update( string|null $table = null )</pre>  <p>Create an update query.</p> <p>This changes the query type to be 'update'. Can be combined with set() and where() methods to create update queries.</p> <h4>Parameters</h4>  <dl> <dt> string|null <code>$table</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>Unused parameter.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>Overrides</h4> <code><a href="../class-cake.database.query/#_update">Cake\Database\Query::update()</a></code>  </div>   <h2>Methods inherited from <a href="../class-cake.database.query/#methods">Cake\Database\Query</a>
</h2> <div class="method-detail">   <h3 class="method-name" id="___toString"> <span class="name">__toString()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2311-2319" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">__toString( )</pre>  <p>Returns string representation of this query (complete SQL statement).</p> <h4>Returns</h4>  string<br>   </div> <div class="method-detail">   <h3 class="method-name" id="__conjugate"> <span class="name">_conjugate()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2228-2260" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_conjugate( string $part , string|null|array|Cake\Database\ExpressionInterface|callable $append , string $conjunction , array $types )</pre>  <p>Helper function used to build conditions by composing QueryExpression objects.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$part</code> </dt> <dd>Name of the query part to append the new part to</dd> <dt> string|null|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable <code>$append</code> </dt> <dd>Expression or builder function to append.</dd> <dt> string <code>$conjunction</code> </dt> <dd>type of conjunction to be used to operate part</dd> <dt> array <code>$types</code> </dt> <dd>associative array of type names used to bind values to query</dd> </dl>   </div> <div class="method-detail">   <h3 class="method-name" id="__decorateStatement"> <span class="name">_decorateStatement()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2205-2226" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_decorateStatement( Cake\Database\StatementInterface $statement )</pre>  <p>Auxiliary function used to wrap the original statement from the driver with any registered callbacks.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.database.statementinterface/">Cake\Database\StatementInterface</a></code> <code>$statement</code> </dt> <dd>to be decorated</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.database.statement.callbackstatement/">Cake\Database\Statement\CallbackStatement</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="__makeJoin"> <span class="name">_makeJoin()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#731-756" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_makeJoin( string|array $table , string|array|Cake\Database\ExpressionInterface $conditions , string $type )</pre>  <p>Returns an array that can be passed to the join method describing a single join clause</p> <h4>Parameters</h4>  <dl> <dt> string|array <code>$table</code> </dt> <dd>The table to join with</dd> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code> <code>$conditions</code> </dt> <dd><p>The conditions to use for joining.</p></dd> <dt> string <code>$type</code> </dt> <dd>the join type to use</dd> </dl>  <h4>Returns</h4>  array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_andHaving"> <span class="name">andHaving()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1323-1342" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">andHaving( string|array|Cake\Database\ExpressionInterface|callable $conditions , array $types = [] )</pre>  <p>Connects any previously defined set of conditions to the provided list using the AND operator in the HAVING clause. This method operates in exactly the same way as the method <code>andWhere()</code> does. Please refer to its documentation for an insight on how to using each parameter.</p> <p>Having fields are not suitable for use with user supplied data as they are not sanitized by the query builder.</p> <h4>Parameters</h4>  <dl> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable <code>$conditions</code> </dt> <dd>The AND conditions for HAVING.</dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>associative array of type names used to bind values to query</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>See</h4>  \Cake\Database\Query::andWhere()<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_andWhere"> <span class="name">andWhere()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#988-1049" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">andWhere( string|array|Cake\Database\ExpressionInterface|callable $conditions , array $types = [] )</pre>  <p>Connects any previously defined set of conditions to the provided list using the AND operator. This function accepts the conditions list in the same format as the method <code>where</code> does, hence you can use arrays, expression objects callback functions or strings.</p> <p>It is important to notice that when calling this function, any previous set of conditions defined for this query will be treated as a single argument for the AND operator. This function will not only operate the most recently defined condition, but all the conditions as a whole.</p> <p>When using an array for defining conditions, creating constraints form each array entry will use the same logic as with the <code>where()</code> function. This means that each array entry will be joined to the other using the AND operator, unless you nest the conditions in the array using other operator.</p> <h3>Examples:</h3> <pre data-language="php">$query-&gt;where(['title' =&gt; 'Hello World')-&gt;andWhere(['author_id' =&gt; 1]);</pre> <p>Will produce:</p> <p><code>WHERE title = 'Hello World' AND author_id = 1</code></p> <pre data-language="php">$query
  -&gt;where(['OR' =&gt; ['published' =&gt; false, 'published is NULL']])
  -&gt;andWhere(['author_id' =&gt; 1, 'comments_count &gt;' =&gt; 10])</pre> <p>Produces:</p> <p><code>WHERE (published = 0 OR published IS NULL) AND author_id = 1 AND comments_count &gt; 10</code></p> <pre data-language="php">$query
  -&gt;where(['title' =&gt; 'Foo'])
  -&gt;andWhere(function ($exp, $query) {
    return $exp
      -&gt;or_(['author_id' =&gt; 1])
      -&gt;add(['author_id' =&gt; 2]);
  });</pre> <p>Generates the following conditions:</p> <p><code>WHERE (title = 'Foo') AND (author_id = 1 OR author_id = 2)</code></p> <h4>Parameters</h4>  <dl> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable <code>$conditions</code> </dt> <dd>The conditions to add with AND.</dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>associative array of type names used to bind values to query</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>See</h4>  \Cake\Database\Query::where()<br> <code><a href="../class-cake.database.type/">Cake\Database\Type</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_bind"> <span class="name">bind()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1960-1979" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">bind( string|integer $param , mixed $value , string|integer $type = 'string' )</pre>  <p>Associates a query placeholder to a value and a type.</p> <pre data-language="php">$query-&gt;bind(':id', 1, 'integer');</pre> <h4>Parameters</h4>  <dl> <dt> string|integer <code>$param</code> </dt> <dd><p>placeholder to be replaced with quoted version of $value</p></dd> <dt> mixed <code>$value</code> </dt> <dd>The value to be bound</dd> <dt> string|integer <code>$type</code> <span class="label">optional</span> <span class="php-quote">'string'</span> </dt> <dd><p>the mapped type name, used for casting when sending to database</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_bufferResults"> <span class="name">bufferResults()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2098-2126" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">bufferResults( boolean|null $enable = null )</pre>  <p>Enable/Disable buffered results.</p> <p>When enabled the results returned by this Query will be buffered. This enables you to iterate a result set multiple times, or both cache and iterate it.</p> <p>When disabled it will consume less memory as fetched results are not remembered for future iterations.</p> <p>If called with no arguments, it will return whether or not buffering is enabled.</p> <h4>Deprecated</h4>  3.4.0 Use enableBufferedResults()/isBufferedResultsEnabled() instead.<br>  <h4>Parameters</h4>  <dl> <dt> boolean|null <code>$enable</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>Whether or not to enable buffering</dd> </dl>  <h4>Returns</h4>  boolean|<code><a href="../class-cake.database.query/">Cake\Database\Query</a></code><br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_clause"> <span class="name">clause()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1842-1882" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">clause( string $name )</pre>  <p>Returns any data that was stored in the specified clause. This is useful for modifying any internal part of the query and it is used by the SQL dialects to transform the query accordingly before it is executed. The valid clauses that can be retrieved are: delete, update, set, insert, values, select, distinct, from, join, set, where, group, having, order, limit, offset and union.</p> <p>The return value for each of those parts may vary. Some clauses use QueryExpression to internally store their state, some use arrays and others may use booleans or integers. This is summary of the return types for each clause.</p> <ul> <li>update: string The name of the table to update</li> <li>set: QueryExpression</li> <li>insert: array, will return an array containing the table + columns.</li> <li>values: ValuesExpression</li> <li>select: array, will return empty array when no fields are set</li> <li>distinct: boolean</li> <li>from: array of tables</li> <li>join: array</li> <li>set: array</li> <li>where: QueryExpression, returns null when not set</li> <li>group: array</li> <li>having: QueryExpression, returns null when not set</li> <li>order: OrderByExpression, returns null when not set</li> <li>limit: integer or QueryExpression, null when not set</li> <li>offset: integer or QueryExpression, null when not set</li> <li>union: array</li> </ul> <h4>Parameters</h4>  <dl> <dt> string <code>$name</code> </dt> <dd>name of the clause to be returned</dd> </dl>  <h4>Returns</h4>  mixed<br>  <h4>Throws</h4>  InvalidArgumentException<br>When the named clause does not exist.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_connection"> <span class="name">connection()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#176-195" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">connection( Cake\Database\Connection|null $connection = null )</pre>  <p>Sets the connection instance to be used for executing and transforming this query When called with a null argument, it will return the current connection instance.</p> <h4>Deprecated</h4>  3.4.0 Use setConnection()/getConnection() instead.<br>  <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.database.connection/">Cake\Database\Connection</a></code>|null <code>$connection</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>Connection instance</dd> </dl>  <h4>Returns</h4>  <br>$this|\Cake\Database\Connection<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_decorateResults"> <span class="name">decorateResults()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1884-1923" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">decorateResults( callable|null $callback , boolean $overwrite = false )</pre>  <p>Registers a callback to be executed for each result that is fetched from the result set, the callback function will receive as first parameter an array with the raw data from the database for every row that is fetched and must return the row with any possible modifications.</p> <p>Callbacks will be executed lazily, if only 3 rows are fetched for database it will called 3 times, event though there might be more rows to be fetched in the cursor.</p> <p>Callbacks are stacked in the order they are registered, if you wish to reset the stack the call this function with the second parameter set to true.</p> <p>If you wish to remove all decorators from the stack, set the first parameter to null and the second to true.</p> <h3>Example</h3> <pre data-language="php">$query-&gt;decorateResults(function ($row) {
  $row['order_total'] = $row['subtotal'] + ($row['subtotal'] * $row['tax']);
   return $row;
});</pre> <h4>Parameters</h4>  <dl> <dt> callable|null <code>$callback</code> </dt> <dd>The callback to invoke when results are fetched.</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>Whether or not this should append or replace all existing decorators.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_disableBufferedResults"> <span class="name">disableBufferedResults()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2065-2079" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">disableBufferedResults( )</pre>  <p>Disables buffered results.</p> <p>Disabling buffering will consume less memory as fetched results are not remembered for future iterations.</p> <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_disableResultsCasting"> <span class="name">disableResultsCasting()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2158-2168" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">disableResultsCasting( )</pre>  <p>Disables the automatic casting of fields to their corresponding PHP data type</p> <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_distinct"> <span class="name">distinct()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#372-420" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">distinct( array|Cake\Database\ExpressionInterface|string|boolean $on = [] , boolean $overwrite = false )</pre>  <p>Adds a <code>DISTINCT</code> clause to the query to remove duplicates from the result set. This clause can only be used for select statements.</p> <p>If you wish to filter duplicates based of those rows sharing a particular field or set of fields, you may pass an array of fields to filter on. Beware that this option might not be fully supported in all database systems.</p> <h3>Examples:</h3> <pre data-language="php">// Filters products with the same name and city
$query-&gt;select(['name', 'city'])-&gt;from('products')-&gt;distinct();

// Filters products in the same city
$query-&gt;distinct(['city']);
$query-&gt;distinct('city');

// Filter products with the same name
$query-&gt;distinct(['name'], true);
$query-&gt;distinct('name', true);</pre> <h4>Parameters</h4>  <dl> <dt> array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|string|boolean <code>$on</code> <span class="label">optional</span> [] </dt> <dd><p>Enable/disable distinct class or list of fields to be filtered on</p></dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset fields with passed list or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_enableBufferedResults"> <span class="name">enableBufferedResults()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2044-2063" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">enableBufferedResults( boolean $enable = true )</pre>  <p>Enables/Disables buffered results.</p> <p>When enabled the results returned by this Query will be buffered. This enables you to iterate a result set multiple times, or both cache and iterate it.</p> <p>When disabled it will consume less memory as fetched results are not remembered for future iterations.</p> <h4>Parameters</h4>  <dl> <dt> boolean <code>$enable</code> <span class="label">optional</span> <span class="php-keyword1">true</span> </dt> <dd>Whether or not to enable buffering</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_enableResultsCasting"> <span class="name">enableResultsCasting()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2170-2180" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">enableResultsCasting( )</pre>  <p>Enables the automatic casting of fields to their corresponding type</p> <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_epilog"> <span class="name">epilog()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1740-1763" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">epilog( string|Cake\Database\Expression\QueryExpression|null $expression = null )</pre>  <p>A string or expression that will be appended to the generated query</p> <h3>Examples:</h3> <pre data-language="php">$query-&gt;select('id')-&gt;where(['author_id' =&gt; 1])-&gt;epilog('FOR UPDATE');
$query
 -&gt;insert('articles', ['title'])
 -&gt;values(['author_id' =&gt; 1])
 -&gt;epilog('RETURNING id');</pre> <p>Epliog content is raw SQL and not suitable for use with user supplied data.</p> <h4>Parameters</h4>  <dl> <dt> string|<code><a href="../class-cake.database.expression.queryexpression/">Cake\Database\Expression\QueryExpression</a></code>|null <code>$expression</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The expression to be appended</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_execute"> <span class="name">execute()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#197-224" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">execute( )</pre>  <p>Compiles the SQL representation of this query and executes it using the configured connection object. Returns the resulting statement object.</p> <p>Executing a query internally executes several steps, the first one is letting the connection transform this object to fit its particular dialect, this might result in generating a different Query object that will be the one to actually be executed. Immediately after, literal values are passed to the connection so they are bound to the query in a safe way. Finally, the resulting statement is decorated with custom objects to execute callbacks for each row retrieved if necessary.</p> <p>Resulting statement is traversable, so it can be used in any loop as you would with an array.</p> <p>This method can be overridden in query subclasses to decorate behavior around query execution.</p> <h4>Returns</h4>  <code><a href="../class-cake.database.statementinterface/">Cake\Database\StatementInterface</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_from"> <span class="name">from()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#455-503" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">from( array|string $tables = [] , boolean $overwrite = false )</pre>  <p>Adds a single or multiple tables to be used in the FROM clause for this query. Tables can be passed as an array of strings, array of expression objects, a single expression or a single string.</p> <p>If an array is passed, keys will be used to alias tables using the value as the real field to be aliased. It is possible to alias strings, ExpressionInterface objects or even other Query objects.</p> <p>By default this function will append any passed argument to the list of tables to be selected from, unless the second argument is set to true.</p> <p>This method can be used for select, update and delete statements.</p> <h3>Examples:</h3> <pre data-language="php">$query-&gt;from(['p' =&gt; 'posts']); // Produces FROM posts p
$query-&gt;from('authors'); // Appends authors: FROM posts p, authors
$query-&gt;from(['products'], true); // Resets the list: FROM products
$query-&gt;from(['sub' =&gt; $countQuery]); // FROM (SELECT ...) sub</pre> <h4>Parameters</h4>  <dl> <dt> array|string <code>$tables</code> <span class="label">optional</span> [] </dt> <dd><p>tables to be added to the list. This argument, can be passed as an array of strings, array of expression objects, or a single string. See the examples above for the valid call types.</p></dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset tables with passed list or not</dd> </dl>  <h4>Returns</h4>  <br>$this|array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_func"> <span class="name">func()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1803-1823" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">func( )</pre>  <p>Returns an instance of a functions builder object that can be used for generating arbitrary SQL functions.</p> <h3>Example:</h3> <pre data-language="php">$query-&gt;func()-&gt;count('*');
$query-&gt;func()-&gt;dateDiff(['2012-01-05', '2012-01-02'])</pre> <h4>Returns</h4>  <code><a href="../class-cake.database.functionsbuilder/">Cake\Database\FunctionsBuilder</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getConnection"> <span class="name">getConnection()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#166-174" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getConnection( )</pre>  <p>Gets the connection instance to be used for executing and transforming this query.</p> <h4>Returns</h4>  <code><a href="../class-cake.database.connection/">Cake\Database\Connection</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getIterator"> <span class="name">getIterator()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1825-1840" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getIterator( )</pre>  <p>Executes this query and returns a results iterator. This function is required for implementing the IteratorAggregate interface and allows the query to be iterated without having to call execute() manually, thus making it look like a result set instead of the query itself.</p> <h4>Returns</h4>  <code><a href="../class-cake.database.statementinterface/">Cake\Database\StatementInterface</a></code>|null<br>  <h4>Implementation of</h4> <code>IteratorAggregate::getIterator()</code>  </div> <div class="method-detail">   <h3 class="method-name" id="_getSelectTypeMap"> <span class="name">getSelectTypeMap()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2143-2156" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getSelectTypeMap( )</pre>  <p>Gets the TypeMap class where the types for each of the fields in the select clause are stored.</p> <h4>Returns</h4>  <code><a href="../class-cake.database.typemap/">Cake\Database\TypeMap</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getValueBinder"> <span class="name">getValueBinder()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1981-1997" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getValueBinder( )</pre>  <p>Returns the currently used ValueBinder instance.</p> <p>A ValueBinder is responsible for generating query placeholders and temporarily associate values to those placeholders so that they can be passed correctly to the statement object.</p> <h4>Returns</h4>  Cake\Database\ValueBinder<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_group"> <span class="name">group()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1257-1296" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">group( array|Cake\Database\ExpressionInterface|string $fields , boolean $overwrite = false )</pre>  <p>Adds a single or multiple fields to be used in the GROUP BY clause for this query. Fields can be passed as an array of strings, array of expression objects, a single expression or a single string.</p> <p>By default this function will append any passed argument to the list of fields to be grouped, unless the second argument is set to true.</p> <h3>Examples:</h3> <pre data-language="php">// Produces GROUP BY id, title
$query-&gt;group(['id', 'title']);

// Produces GROUP BY title
$query-&gt;group('title');</pre> <p>Group fields are not suitable for use with user supplied data as they are not sanitized by the query builder.</p> <h4>Parameters</h4>  <dl> <dt> array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|string <code>$fields</code> </dt> <dd>fields to be added to the list</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset fields with passed list or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_having"> <span class="name">having()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1298-1321" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">having( string|array|Cake\Database\ExpressionInterface|callable|null $conditions = null , array $types = [] , boolean $overwrite = false )</pre>  <p>Adds a condition or set of conditions to be used in the <code>HAVING</code> clause for this query. This method operates in exactly the same way as the method <code>where()</code> does. Please refer to its documentation for an insight on how to using each parameter.</p> <p>Having fields are not suitable for use with user supplied data as they are not sanitized by the query builder.</p> <h4>Parameters</h4>  <dl> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable|null <code>$conditions</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The having conditions.</dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>associative array of type names used to bind values to query</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset conditions with passed list or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>See</h4>  \Cake\Database\Query::where()<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_identifier"> <span class="name">identifier()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1577-1596" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">identifier( string $identifier )</pre>  <p>Creates an expression that refers to an identifier. Identifiers are used to refer to field names and allow the SQL compiler to apply quotes or escape the identifier.</p> <p>The value is used as is, and you might be required to use aliases or include the table reference in the identifier. Do not use this method to inject SQL methods or logical statements.</p> <h3>Example</h3> <pre data-language="php">$query-&gt;newExp()-&gt;lte('count', $query-&gt;identifier('total'));</pre> <h4>Parameters</h4>  <dl> <dt> string <code>$identifier</code> </dt> <dd>The identifier for an expression</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_innerJoin"> <span class="name">innerJoin()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#711-729" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">innerJoin( string|array $table , string|array|Cake\Database\ExpressionInterface $conditions = [] , array $types = [] )</pre>  <p>Adds a single <code>INNER JOIN</code> clause to the query.</p> <p>This is a shorthand method for building joins via <code>join()</code>.</p> <p>The arguments of this method are identical to the <code>leftJoin()</code> shorthand, please refer to that methods description for further details.</p> <h4>Parameters</h4>  <dl> <dt> string|array <code>$table</code> </dt> <dd>The table to join with</dd> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code> <code>$conditions</code> <span class="label">optional</span> [] </dt> <dd><p>The conditions to use for joining.</p></dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd><p>a list of types associated to the conditions used for converting values to the corresponding database representation.</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_into"> <span class="name">into()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1562-1575" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">into( string $table )</pre>  <p>Set the table name for insert queries.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$table</code> </dt> <dd>The table name to insert into.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_isBufferedResultsEnabled"> <span class="name">isBufferedResultsEnabled()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2081-2096" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">isBufferedResultsEnabled( )</pre>  <p>Returns whether buffered results are enabled/disabled.</p> <p>When enabled the results returned by this Query will be buffered. This enables you to iterate a result set multiple times, or both cache and iterate it.</p> <p>When disabled it will consume less memory as fetched results are not remembered for future iterations.</p> <h4>Returns</h4>  boolean<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_join"> <span class="name">join()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#505-630" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">join( array|string|null $tables = null , array $types = [] , boolean $overwrite = false )</pre>  <p>Adds a single or multiple tables to be used as JOIN clauses to this query. Tables can be passed as an array of strings, an array describing the join parts, an array with multiple join descriptions, or a single string.</p> <p>By default this function will append any passed argument to the list of tables to be joined, unless the third argument is set to true.</p> <p>When no join type is specified an <code>INNER JOIN</code> is used by default: <code>$query-&gt;join(['authors'])</code> will produce <code>INNER JOIN authors ON 1 = 1</code></p> <p>It is also possible to alias joins using the array key: <code>$query-&gt;join(['a' =&gt; 'authors'])</code> will produce <code>INNER JOIN authors a ON 1 = 1</code></p> <p>A join can be fully described and aliased using the array notation:</p> <pre data-language="php">$query-&gt;join([
    'a' =&gt; [
        'table' =&gt; 'authors',
        'type' =&gt; 'LEFT',
        'conditions' =&gt; 'a.id = b.author_id'
    ]
]);
// Produces LEFT JOIN authors a ON a.id = b.author_id</pre> <p>You can even specify multiple joins in an array, including the full description:</p> <pre data-language="php">$query-&gt;join([
    'a' =&gt; [
        'table' =&gt; 'authors',
        'type' =&gt; 'LEFT',
        'conditions' =&gt; 'a.id = b.author_id'
    ],
    'p' =&gt; [
        'table' =&gt; 'publishers',
        'type' =&gt; 'INNER',
        'conditions' =&gt; 'p.id = b.publisher_id AND p.name = "Cake Software Foundation"'
    ]
]);
// LEFT JOIN authors a ON a.id = b.author_id
// INNER JOIN publishers p ON p.id = b.publisher_id AND p.name = "Cake Software Foundation"</pre> <h3>Using conditions and types</h3> <p>Conditions can be expressed, as in the examples above, using a string for comparing columns, or string with already quoted literal values. Additionally it is possible to use conditions expressed in arrays or expression objects.</p> <p>When using arrays for expressing conditions, it is often desirable to convert the literal values to the correct database representation. This is achieved using the second parameter of this function.</p> <pre data-language="php">$query-&gt;join(['a' =&gt; [
    'table' =&gt; 'articles',
    'conditions' =&gt; [
        'a.posted &gt;=' =&gt; new DateTime('-3 days'),
        'a.published' =&gt; true,
        'a.author_id = authors.id'
    ]
]], ['a.posted' =&gt; 'datetime', 'a.published' =&gt; 'boolean'])</pre> <h3>Overwriting joins</h3> <p>When creating aliased joins using the array notation, you can override previous join definitions by using the same alias in consequent calls to this function or you can replace all previously defined joins with another list if the third parameter for this function is set to true.</p> <pre data-language="php">$query-&gt;join(['alias' =&gt; 'table']); // joins table with as alias
$query-&gt;join(['alias' =&gt; 'another_table']); // joins another_table with as alias
$query-&gt;join(['something' =&gt; 'different_table'], [], true); // resets joins list</pre> <h4>Parameters</h4>  <dl> <dt> array|string|null <code>$tables</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>list of tables to be joined in the query</dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>associative array of type names used to bind values to query</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset joins with passed list or not</dd> </dl>  <h4>Returns</h4>  <br>$this|array<br>  <h4>See</h4>  <code><a href="../class-cake.database.type/">Cake\Database\Type</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_leftJoin"> <span class="name">leftJoin()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#649-689" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">leftJoin( string|array $table , string|array|Cake\Database\ExpressionInterface $conditions = [] , array $types = [] )</pre>  <p>Adds a single <code>LEFT JOIN</code> clause to the query.</p> <p>This is a shorthand method for building joins via <code>join()</code>.</p> <p>The table name can be passed as a string, or as an array in case it needs to be aliased:</p> <pre data-language="php">// LEFT JOIN authors ON authors.id = posts.author_id
$query-&gt;leftJoin('authors', 'authors.id = posts.author_id');

// LEFT JOIN authors a ON a.id = posts.author_id
$query-&gt;leftJoin(['a' =&gt; 'authors'], 'a.id = posts.author_id');</pre> <p>Conditions can be passed as strings, arrays, or expression objects. When using arrays it is possible to combine them with the <code>$types</code> parameter in order to define how to convert the values:</p> <pre data-language="php">$query-&gt;leftJoin(['a' =&gt; 'articles'], [
     'a.posted &gt;=' =&gt; new DateTime('-3 days'),
     'a.published' =&gt; true,
     'a.author_id = authors.id'
], ['a.posted' =&gt; 'datetime', 'a.published' =&gt; 'boolean']);</pre> <p>See <code>join()</code> for further details on conditions and types.</p> <h4>Parameters</h4>  <dl> <dt> string|array <code>$table</code> </dt> <dd>The table to join with</dd> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code> <code>$conditions</code> <span class="label">optional</span> [] </dt> <dd><p>The conditions to use for joining.</p></dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd><p>a list of types associated to the conditions used for converting values to the corresponding database representation.</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_limit"> <span class="name">limit()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1405-1430" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">limit( integer|Cake\Database\ExpressionInterface $num )</pre>  <p>Sets the number of records that should be retrieved from database, accepts an integer or an expression object that evaluates to an integer. In some databases, this operation might not be supported or will require the query to be transformed in order to limit the result set size.</p> <h3>Examples</h3> <pre data-language="php">$query-&gt;limit(10) // generates LIMIT 10
$query-&gt;limit($query-&gt;newExpr()-&gt;add(['1 + 1'])); // LIMIT (1 + 1)</pre> <h4>Parameters</h4>  <dl> <dt> integer|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code> <code>$num</code> </dt> <dd>number of records to be returned</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_modifier"> <span class="name">modifier()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#422-453" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">modifier( array|Cake\Database\ExpressionInterface|string $modifiers , boolean $overwrite = false )</pre>  <p>Adds a single or multiple <code>SELECT</code> modifiers to be used in the <code>SELECT</code>.</p> <p>By default this function will append any passed argument to the list of modifiers to be applied, unless the second argument is set to true.</p> <h3>Example:</h3> <pre data-language="php">// Ignore cache query in MySQL
$query-&gt;select(['name', 'city'])-&gt;from('products')-&gt;modifier('SQL_NO_CACHE');
// It will produce the SQL: SELECT SQL_NO_CACHE name, city FROM products

// Or with multiple modifiers
$query-&gt;select(['name', 'city'])-&gt;from('products')-&gt;modifier(['HIGH_PRIORITY', 'SQL_NO_CACHE']);
// It will produce the SQL: SELECT HIGH_PRIORITY SQL_NO_CACHE name, city FROM products</pre> <h4>Parameters</h4>  <dl> <dt> array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|string <code>$modifiers</code> </dt> <dd>modifiers to be applied to the query</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset order with field list or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_newExpr"> <span class="name">newExpr()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1775-1801" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">newExpr( mixed $rawExpression = null )</pre>  <p>Returns a new QueryExpression object. This is a handy function when building complex queries using a fluent interface. You can also override this function in subclasses to use a more specialized QueryExpression class if required.</p> <p>You can optionally pass a single raw SQL string or an array or expressions in any format accepted by \Cake\Database\Expression\QueryExpression:</p> <pre data-language="php">$expression = $query-&gt;newExpr(); // Returns an empty expression object
$expression = $query-&gt;newExpr('Table.column = Table2.column'); // Return a raw SQL expression</pre> <h4>Parameters</h4>  <dl> <dt> mixed <code>$rawExpression</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>A string, array or anything you want wrapped in an expression object</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.database.expression.queryexpression/">Cake\Database\Expression\QueryExpression</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_offset"> <span class="name">offset()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1432-1459" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">offset( integer|Cake\Database\ExpressionInterface $num )</pre>  <p>Sets the number of records that should be skipped from the original result set This is commonly used for paginating large results. Accepts an integer or an expression object that evaluates to an integer.</p> <p>In some databases, this operation might not be supported or will require the query to be transformed in order to limit the result set size.</p> <h3>Examples</h3> <pre data-language="php">$query-&gt;offset(10) // generates OFFSET 10
$query-&gt;offset($query-&gt;newExpr()-&gt;add(['1 + 1'])); // OFFSET (1 + 1)</pre> <h4>Parameters</h4>  <dl> <dt> integer|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code> <code>$num</code> </dt> <dd>number of records to be skipped</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_orHaving"> <span class="name">orHaving()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1344-1366" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">orHaving( string|array|Cake\Database\ExpressionInterface|callable $conditions , array $types = [] )</pre>  <p>Connects any previously defined set of conditions to the provided list using the OR operator in the HAVING clause. This method operates in exactly the same way as the method <code>orWhere()</code> does. Please refer to its documentation for an insight on how to using each parameter.</p> <p>Having fields are not suitable for use with user supplied data as they are not sanitized by the query builder.</p> <h4>Deprecated</h4>  <p>3.5.0 This method creates hard to predict SQL based on the current query state. Use <code>Query::having()</code> instead as it has more predicatable and easier to understand behavior.</p>
<br>  <h4>Parameters</h4>  <dl> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable <code>$conditions</code> </dt> <dd>The OR conditions for HAVING.</dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>associative array of type names used to bind values to query.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>See</h4>  \Cake\Database\Query::orWhere()<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_orWhere"> <span class="name">orWhere()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1051-1118" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">orWhere( string|array|Cake\Database\ExpressionInterface|callable $conditions , array $types = [] )</pre>  <p>Connects any previously defined set of conditions to the provided list using the OR operator. This function accepts the conditions list in the same format as the method <code>where</code> does, hence you can use arrays, expression objects callback functions or strings.</p> <p>It is important to notice that when calling this function, any previous set of conditions defined for this query will be treated as a single argument for the OR operator. This function will not only operate the most recently defined condition, but all the conditions as a whole.</p> <p>When using an array for defining conditions, creating constraints form each array entry will use the same logic as with the <code>where()</code> function. This means that each array entry will be joined to the other using the OR operator, unless you nest the conditions in the array using other operator.</p> <h3>Examples:</h3> <pre data-language="php">$query-&gt;where(['title' =&gt; 'Hello World')-&gt;orWhere(['title' =&gt; 'Foo']);</pre> <p>Will produce:</p> <p><code>WHERE title = 'Hello World' OR title = 'Foo'</code></p> <pre data-language="php">$query
  -&gt;where(['OR' =&gt; ['published' =&gt; false, 'published is NULL']])
  -&gt;orWhere(['author_id' =&gt; 1, 'comments_count &gt;' =&gt; 10])</pre> <p>Produces:</p> <p><code>WHERE (published = 0 OR published IS NULL) OR (author_id = 1 AND comments_count &gt; 10)</code></p> <pre data-language="php">$query
  -&gt;where(['title' =&gt; 'Foo'])
  -&gt;orWhere(function ($exp, $query) {
    return $exp
      -&gt;or_(['author_id' =&gt; 1])
      -&gt;add(['author_id' =&gt; 2]);
  });</pre> <p>Generates the following conditions:</p> <p><code>WHERE (title = 'Foo') OR (author_id = 1 OR author_id = 2)</code></p> <h4>Deprecated</h4>  <p>3.5.0 This method creates hard to predict SQL based on the current query state. Use <code>Query::where()</code> instead as it has more predicatable and easier to understand behavior.</p>
<br>  <h4>Parameters</h4>  <dl> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable <code>$conditions</code> </dt> <dd>The conditions to add with OR.</dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>associative array of type names used to bind values to query</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>See</h4>  \Cake\Database\Query::where()<br> <code><a href="../class-cake.database.type/">Cake\Database\Type</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_order"> <span class="name">order()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1120-1195" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">order( array|Cake\Database\ExpressionInterface|callable|string $fields , boolean $overwrite = false )</pre>  <p>Adds a single or multiple fields to be used in the ORDER clause for this query. Fields can be passed as an array of strings, array of expression objects, a single expression or a single string.</p> <p>If an array is passed, keys will be used as the field itself and the value will represent the order in which such field should be ordered. When called multiple times with the same fields as key, the last order definition will prevail over the others.</p> <p>By default this function will append any passed argument to the list of fields to be selected, unless the second argument is set to true.</p> <h3>Examples:</h3> <pre data-language="php">$query-&gt;order(['title' =&gt; 'DESC', 'author_id' =&gt; 'ASC']);</pre> <p>Produces:</p> <p><code>ORDER BY title DESC, author_id ASC</code></p> <pre data-language="php">$query-&gt;order(['title' =&gt; 'DESC NULLS FIRST'])-&gt;order('author_id');</pre> <p>Will generate:</p> <p><code>ORDER BY title DESC NULLS FIRST, author_id</code></p> <pre data-language="php">$expression = $query-&gt;newExpr()-&gt;add(['id % 2 = 0']);
$query-&gt;order($expression)-&gt;order(['title' =&gt; 'ASC']);</pre> <p>and</p> <pre data-language="php">$query-&gt;order(function ($exp, $query) {
    return [$exp-&gt;add(['id % 2 = 0']), 'title' =&gt; 'ASC'];
});</pre> <p>Will both become:</p> <p><code>ORDER BY (id %2 = 0), title ASC</code></p> <p>Order fields/directions are not sanitized by the query builder. You should use a whitelist of fields/directions when passing in user-supplied data to <code>order()</code>.</p> <p>If you need to set complex expressions as order conditions, you should use <code>orderAsc()</code> or <code>orderDesc()</code>.</p> <h4>Parameters</h4>  <dl> <dt> array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable|string <code>$fields</code> </dt> <dd>fields to be added to the list</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset order with field list or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_orderAsc"> <span class="name">orderAsc()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1197-1225" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">orderAsc( string|Cake\Database\Expression\QueryExpression $field , boolean $overwrite = false )</pre>  <p>Add an ORDER BY clause with an ASC direction.</p> <p>This method allows you to set complex expressions as order conditions unlike order()</p> <p>Order fields are not suitable for use with user supplied data as they are not sanitized by the query builder.</p> <h4>Parameters</h4>  <dl> <dt> string|<code><a href="../class-cake.database.expression.queryexpression/">Cake\Database\Expression\QueryExpression</a></code> <code>$field</code> </dt> <dd>The field to order on.</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>Whether or not to reset the order clauses.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_orderDesc"> <span class="name">orderDesc()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1227-1255" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">orderDesc( string|Cake\Database\Expression\QueryExpression $field , boolean $overwrite = false )</pre>  <p>Add an ORDER BY clause with a DESC direction.</p> <p>This method allows you to set complex expressions as order conditions unlike order()</p> <p>Order fields are not suitable for use with user supplied data as they are not sanitized by the query builder.</p> <h4>Parameters</h4>  <dl> <dt> string|<code><a href="../class-cake.database.expression.queryexpression/">Cake\Database\Expression\QueryExpression</a></code> <code>$field</code> </dt> <dd>The field to order on.</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>Whether or not to reset the order clauses.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_page"> <span class="name">page()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1368-1403" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">page( integer $num , integer|null $limit = null )</pre>  <p>Set the page of results you want.</p> <p>This method provides an easier to use interface to set the limit + offset in the record set you want as results. If empty the limit will default to the existing limit clause, and if that too is empty, then <code>25</code> will be used.</p> <p>Pages must start at 1.</p> <h4>Parameters</h4>  <dl> <dt> integer <code>$num</code> </dt> <dd>The page number you want.</dd> <dt> integer|null <code>$limit</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>The number of rows you want in the page. If null the current limit clause will be used.</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>Throws</h4>  InvalidArgumentException<br>If page number &lt; 1.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_removeJoin"> <span class="name">removeJoin()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#632-647" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">removeJoin( string $name )</pre>  <p>Remove a join if it has been defined.</p> <p>Useful when you are redefining joins or want to re-order the join clauses.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$name</code> </dt> <dd>The alias/name of the join to remove.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_rightJoin"> <span class="name">rightJoin()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#691-709" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">rightJoin( string|array $table , string|array|Cake\Database\ExpressionInterface $conditions = [] , array $types = [] )</pre>  <p>Adds a single <code>RIGHT JOIN</code> clause to the query.</p> <p>This is a shorthand method for building joins via <code>join()</code>.</p> <p>The arguments of this method are identical to the <code>leftJoin()</code> shorthand, please refer to that methods description for further details.</p> <h4>Parameters</h4>  <dl> <dt> string|array <code>$table</code> </dt> <dd>The table to join with</dd> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code> <code>$conditions</code> <span class="label">optional</span> [] </dt> <dd><p>The conditions to use for joining.</p></dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd><p>a list of types associated to the conditions used for converting values to the corresponding database representation.</p></dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_rowCountAndClose"> <span class="name">rowCountAndClose()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#226-255" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">rowCountAndClose( )</pre>  <p>Executes the SQL of this query and immediately closes the statement before returning the row count of records changed.</p> <p>This method can be used with UPDATE and DELETE queries, but is not recommended for SELECT queries and is not used to count records.</p> <h2>Example</h2> <pre data-language="php">$rowCount = $query-&gt;update('articles')
                -&gt;set(['published'=&gt;true])
                -&gt;where(['published'=&gt;false])
                -&gt;rowCountAndClose();</pre> <p>The above example will change the published column to true for all false records, and return the number of records that were updated.</p> <h4>Returns</h4>  integer<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_selectTypeMap"> <span class="name">selectTypeMap()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2182-2203" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">selectTypeMap( Cake\Database\TypeMap $typeMap = null )</pre>  <p>Sets the TypeMap class where the types for each of the fields in the select clause are stored.</p> <p>When called with no arguments, the current TypeMap object is returned.</p> <h4>Deprecated</h4>  3.4.0 Use setSelectTypeMap()/getSelectTypeMap() instead.<br>  <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.database.typemap/">Cake\Database\TypeMap</a></code> <code>$typeMap</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The map object to use</dd> </dl>  <h4>Returns</h4>  <br>$this|\Cake\Database\TypeMap<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_set"> <span class="name">set()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1658-1718" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">set( string|array|callable|Cake\Database\Expression\QueryExpression $key , mixed $value = null , array $types = [] )</pre>  <p>Set one or many fields to update.</p> <h3>Examples</h3> <p>Passing a string:</p> <pre data-language="php">$query-&gt;update('articles')-&gt;set('title', 'The Title');</pre> <p>Passing an array:</p> <pre data-language="php">$query-&gt;update('articles')-&gt;set(['title' =&gt; 'The Title'], ['title' =&gt; 'string']);</pre> <p>Passing a callable:</p> <pre data-language="php">$query-&gt;update('articles')-&gt;set(function ($exp) {
  return $exp-&gt;eq('title', 'The title', 'string');
});</pre> <h4>Parameters</h4>  <dl> <dt> string|array|callable|<code><a href="../class-cake.database.expression.queryexpression/">Cake\Database\Expression\QueryExpression</a></code> <code>$key</code> </dt> <dd><p>The column name or array of keys + values to set. This can also be a QueryExpression containing a SQL fragment. It can also be a callable, that is required to return an expression object.</p></dd> <dt> mixed <code>$value</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>The value to update $key to. Can be null if $key is an array or QueryExpression. When $key is an array, this parameter will be used as $types instead.</p></dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>The column types to treat data as.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_setConnection"> <span class="name">setConnection()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#152-164" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">setConnection( Cake\Database\Connection $connection )</pre>  <p>Sets the connection instance to be used for executing and transforming this query.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.database.connection/">Cake\Database\Connection</a></code> <code>$connection</code> </dt> <dd>Connection instance</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_setSelectTypeMap"> <span class="name">setSelectTypeMap()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2128-2141" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">setSelectTypeMap( Cake\Database\TypeMap $typeMap )</pre>  <p>Sets the TypeMap class where the types for each of the fields in the select clause are stored.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.database.typemap/">Cake\Database\TypeMap</a></code> <code>$typeMap</code> </dt> <dd>The map object to use</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_setValueBinder"> <span class="name">setValueBinder()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1999-2014" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">setValueBinder( Cake\Database\ValueBinder|boolean $binder )</pre>  <p>Overwrite the current value binder</p> <p>A ValueBinder is responsible for generating query placeholders and temporarily associate values to those placeholders so that they can be passed correctly to the statement object.</p> <h4>Parameters</h4>  <dl> <dt> Cake\Database\ValueBinder|boolean <code>$binder</code> </dt> <dd>The binder or false to disable binding.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_traverse"> <span class="name">traverse()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#283-313" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">traverse( callable $visitor , array $parts = [] )</pre>  <p>Will iterate over every specified part. Traversing functions can aggregate results using variables in the closure or instance variables. This function is commonly used as a way for traversing all query parts that are going to be used for constructing a query.</p> <p>The callback will receive 2 parameters, the first one is the value of the query part that is being iterated and the second the name of such part.</p> <h3>Example:</h3> <pre data-language="php">$query-&gt;select(['title'])-&gt;from('articles')-&gt;traverse(function ($value, $clause) {
    if ($clause === 'select') {
        var_dump($value);
    }
}, ['select', 'from']);</pre> <h4>Parameters</h4>  <dl> <dt> callable <code>$visitor</code> </dt> <dd>A function or callable to be executed for each part</dd> <dt> array <code>$parts</code> <span class="label">optional</span> [] </dt> <dd>The query clauses to traverse</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>Implementation of</h4> <code><a href="../class-cake.database.expressioninterface/#_traverse">Cake\Database\ExpressionInterface::traverse()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_traverseExpressions"> <span class="name">traverseExpressions()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1925-1958" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">traverseExpressions( callable $callback )</pre>  <p>This function works similar to the traverse() function, with the difference that it does a full depth traversal of the entire expression tree. This will execute the provided callback function for each ExpressionInterface object that is stored inside this query at any nesting depth in any part of the query.</p> <p>Callback will receive as first parameter the currently visited expression.</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$callback</code> </dt> <dd><p>the function to be executed for each ExpressionInterface found inside this query.</p></dd> </dl>  <h4>Returns</h4>  <br>$this|null<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_type"> <span class="name">type()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1765-1773" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">type( )</pre>  <p>Returns the type of this query (select, insert, update, delete)</p> <h4>Returns</h4>  string<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_union"> <span class="name">union()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1461-1497" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">union( string|Cake\Database\Query $query , boolean $overwrite = false )</pre>  <p>Adds a complete query to be used in conjunction with an UNION operator with this query. This is used to combine the result set of this query with the one that will be returned by the passed query. You can add as many queries as you required by calling multiple times this method with different queries.</p> <p>By default, the UNION operator will remove duplicate rows, if you wish to include every row for all queries, use unionAll().</p> <h3>Examples</h3> <pre data-language="php">$union = (new Query($conn))-&gt;select(['id', 'title'])-&gt;from(['a' =&gt; 'articles']);
$query-&gt;select(['id', 'name'])-&gt;from(['d' =&gt; 'things'])-&gt;union($union);</pre> <p>Will produce:</p> <p><code>SELECT id, name FROM things d UNION SELECT id, title FROM articles a</code></p> <h4>Parameters</h4>  <dl> <dt> string|<code><a href="../class-cake.database.query/">Cake\Database\Query</a></code> <code>$query</code> </dt> <dd>full SQL query to be used in UNION operator</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset the list of queries to be operated or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_unionAll"> <span class="name">unionAll()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1499-1532" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">unionAll( string|Cake\Database\Query $query , boolean $overwrite = false )</pre>  <p>Adds a complete query to be used in conjunction with the UNION ALL operator with this query. This is used to combine the result set of this query with the one that will be returned by the passed query. You can add as many queries as you required by calling multiple times this method with different queries.</p> <p>Unlike UNION, UNION ALL will not remove duplicate rows.</p> <pre data-language="php">$union = (new Query($conn))-&gt;select(['id', 'title'])-&gt;from(['a' =&gt; 'articles']);
$query-&gt;select(['id', 'name'])-&gt;from(['d' =&gt; 'things'])-&gt;unionAll($union);</pre> <p>Will produce:</p> <p><code>SELECT id, name FROM things d UNION ALL SELECT id, title FROM articles a</code></p> <h4>Parameters</h4>  <dl> <dt> string|<code><a href="../class-cake.database.query/">Cake\Database\Query</a></code> <code>$query</code> </dt> <dd>full SQL query to be used in UNION operator</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset the list of queries to be operated or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_valueBinder"> <span class="name">valueBinder()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#2016-2042" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">valueBinder( Cake\Database\ValueBinder|false|null $binder = null )</pre>  <p>Returns the currently used ValueBinder instance. If a value is passed, it will be set as the new instance to be used.</p> <p>A ValueBinder is responsible for generating query placeholders and temporarily associate values to those placeholders so that they can be passed correctly to the statement object.</p> <h4>Deprecated</h4>  3.5.0 Use setValueBinder()/getValueBinder() instead.<br>  <h4>Parameters</h4>  <dl> <dt> Cake\Database\ValueBinder|false|null <code>$binder</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd><p>new instance to be set. If no value is passed the default one will be returned</p></dd> </dl>  <h4>Returns</h4>  <br>$this|\Cake\Database\ValueBinder<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_values"> <span class="name">values()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#1598-1633" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">values( array|Cake\Database\Query $data )</pre>  <p>Set the values for an insert query.</p> <p>Multi inserts can be performed by calling values() more than one time, or by providing an array of value sets. Additionally $data can be a Query instance to insert data from another SELECT statement.</p> <h4>Parameters</h4>  <dl> <dt> array|<code><a href="../class-cake.database.query/">Cake\Database\Query</a></code> <code>$data</code> </dt> <dd>The data to insert.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>Throws</h4>  <code><a href="../class-cake.database.exception/">Cake\Database\Exception</a></code><br><p>if you try to set values before declaring columns. Or if you try to set values on non-insert queries.</p>
<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_where"> <span class="name">where()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#758-886" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">where( string|array|Cake\Database\ExpressionInterface|callable|null $conditions = null , array $types = [] , boolean $overwrite = false )</pre>  <p>Adds a condition or set of conditions to be used in the WHERE clause for this query. Conditions can be expressed as an array of fields as keys with comparison operators in it, the values for the array will be used for comparing the field to such literal. Finally, conditions can be expressed as a single string or an array of strings.</p> <p>When using arrays, each entry will be joined to the rest of the conditions using an <code>AND</code> operator. Consecutive calls to this function will also join the new conditions specified using the AND operator. Additionally, values can be expressed using expression objects which can include other query objects.</p> <p>Any conditions created with this methods can be used with any <code>SELECT</code>, <code>UPDATE</code> and <code>DELETE</code> type of queries.</p> <h3>Conditions using operators:</h3> <pre data-language="php">$query-&gt;where([
    'posted &gt;=' =&gt; new DateTime('3 days ago'),
    'title LIKE' =&gt; 'Hello W%',
    'author_id' =&gt; 1,
], ['posted' =&gt; 'datetime']);</pre> <p>The previous example produces:</p> <p><code>WHERE posted &gt;= 2012-01-27 AND title LIKE 'Hello W%' AND author_id = 1</code></p> <p>Second parameter is used to specify what type is expected for each passed key. Valid types can be used from the mapped with Database\Type class.</p> <h3>Nesting conditions with conjunctions:</h3> <pre data-language="php">$query-&gt;where([
    'author_id !=' =&gt; 1,
    'OR' =&gt; ['published' =&gt; true, 'posted &lt;' =&gt; new DateTime('now')],
    'NOT' =&gt; ['title' =&gt; 'Hello']
], ['published' =&gt; boolean, 'posted' =&gt; 'datetime']</pre> <p>The previous example produces:</p> <p><code>WHERE author_id = 1 AND (published = 1 OR posted &lt; '2012-02-01') AND NOT (title = 'Hello')</code></p> <p>You can nest conditions using conjunctions as much as you like. Sometimes, you may want to define 2 different options for the same key, in that case, you can wrap each condition inside a new array:</p> <p><code>$query-&gt;where(['OR' =&gt; [['published' =&gt; false], ['published' =&gt; true]])</code></p> <p>Would result in:</p> <p><code>WHERE (published = false) OR (published = true)</code></p> <p>Keep in mind that every time you call where() with the third param set to false (default), it will join the passed conditions to the previous stored list using the <code>AND</code> operator. Also, using the same array key twice in consecutive calls to this method will not override the previous value.</p> <h3>Using expressions objects:</h3> <pre data-language="php">$exp = $query-&gt;newExpr()-&gt;add(['id !=' =&gt; 100, 'author_id' != 1])-&gt;tieWith('OR');
$query-&gt;where(['published' =&gt; true], ['published' =&gt; 'boolean'])-&gt;where($exp);</pre> <p>The previous example produces:</p> <p><code>WHERE (id != 100 OR author_id != 1) AND published = 1</code></p> <p>Other Query objects that be used as conditions for any field.</p> <h3>Adding conditions in multiple steps:</h3> <p>You can use callable functions to construct complex expressions, functions receive as first argument a new QueryExpression object and this query instance as second argument. Functions must return an expression object, that will be added the list of conditions for the query using the <code>AND</code> operator.</p> <pre data-language="php">$query
  -&gt;where(['title !=' =&gt; 'Hello World'])
  -&gt;where(function ($exp, $query) {
    $or = $exp-&gt;or_(['id' =&gt; 1]);
    $and = $exp-&gt;and_(['id &gt;' =&gt; 2, 'id &lt;' =&gt; 10]);
   return $or-&gt;add($and);
  });</pre> <ul> <li>The previous example produces:</li> </ul> <p><code>WHERE title != 'Hello World' AND (id = 1 OR (id &gt; 2 AND id &lt; 10))</code></p> <h3>Conditions as strings:</h3> <pre data-language="php">$query-&gt;where(['articles.author_id = authors.id', 'modified IS NULL']);</pre> <p>The previous example produces:</p> <p><code>WHERE articles.author_id = authors.id AND modified IS NULL</code></p> <p>Please note that when using the array notation or the expression objects, all <em>values</em> will be correctly quoted and transformed to the correspondent database data type automatically for you, thus securing your application from SQL injections. The keys however, are not treated as unsafe input, and should be sanitized/whitelisted.</p> <p>If you use string conditions make sure that your values are correctly quoted. The safest thing you can do is to never use string conditions.</p> <h4>Parameters</h4>  <dl> <dt> string|array|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code>|callable|null <code>$conditions</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The conditions to filter on.</dd> <dt> array <code>$types</code> <span class="label">optional</span> [] </dt> <dd>associative array of type names used to bind values to query</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>whether to reset conditions with passed list or not</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>See</h4>  <code><a href="../class-cake.database.type/">Cake\Database\Type</a></code><br> <code><a href="../class-cake.database.expression.queryexpression/">Cake\Database\Expression\QueryExpression</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_whereInList"> <span class="name">whereInList()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#930-959" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">whereInList( string $field , array $values , array $options = [] )</pre>  <p>Adds an IN condition or set of conditions to be used in the WHERE clause for this query.</p> <p>This method does allow empty inputs in contrast to where() if you set 'allowEmpty' to true. Be careful about using it without proper sanity checks.</p> <p>Options: - <code>types</code> - Associative array of type names used to bind values to query - <code>allowEmpty</code> - Allow empty array.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>Field</dd> <dt> array <code>$values</code> </dt> <dd>Array of values</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>Options</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_whereNotInList"> <span class="name">whereNotInList()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#961-986" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">whereNotInList( string $field , array $values , array $options = [] )</pre>  <p>Adds a NOT IN condition or set of conditions to be used in the WHERE clause for this query.</p> <p>This method does allow empty inputs in contrast to where() if you set 'allowEmpty' to true. Be careful about using it without proper sanity checks.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>Field</dd> <dt> array <code>$values</code> </dt> <dd>Array of values</dd> <dt> array <code>$options</code> <span class="label">optional</span> [] </dt> <dd>Options</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_whereNotNull"> <span class="name">whereNotNull()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#888-907" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">whereNotNull( array|string|Cake\Database\ExpressionInterface $fields )</pre>  <p>Convenience method that adds a NOT NULL condition to the query</p> <h4>Parameters</h4>  <dl> <dt> array|string|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code> <code>$fields</code> </dt> <dd>A single field or expressions or a list of them that should be not null</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_whereNull"> <span class="name">whereNull()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.Query.html#909-928" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">whereNull( array|string|Cake\Database\ExpressionInterface $fields )</pre>  <p>Convenience method that adds a IS NULL condition to the query</p> <h4>Parameters</h4>  <dl> <dt> array|string|<code><a href="../class-cake.database.expressioninterface/">Cake\Database\ExpressionInterface</a></code> <code>$fields</code> </dt> <dd>A single field or expressions or a list of them that should be null</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div>   <h2>Methods used from <a href="../class-cake.datasource.querytrait/#methods">Cake\Datasource\QueryTrait</a>
</h2> <div class="method-detail">   <h3 class="method-name" id="__decoratorClass"> <span class="name">_decoratorClass()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#580-588" title="Go to source code" class="source" target="_blank">source</a> <span class="label">protected</span>  </h3> <pre class="method-signature" data-language="php">_decoratorClass( )</pre>  <p>Returns the name of the class to be used for decorating results</p> <h4>Returns</h4>  string<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_aliasField"> <span class="name">aliasField()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#233-264" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">aliasField( string $field , string|null $alias = null )</pre>  <p>Returns a key =&gt; value array representing a single aliased field that can be passed directly to the select() method. The key will contain the alias and the value the actual field name.</p> <p>If the field is already aliased, then it will not be changed. If no $alias is passed, the default table for this query will be used.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>The field to alias</dd> <dt> string|null <code>$alias</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>the alias used to prefix the field</dd> </dl>  <h4>Returns</h4>  array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_aliasFields"> <span class="name">aliasFields()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#266-286" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">aliasFields( array $fields , string|null $defaultAlias = null )</pre>  <p>Runs <code>aliasField()</code> for each field in the provided list and returns the result under a single array.</p> <h4>Parameters</h4>  <dl> <dt> array <code>$fields</code> </dt> <dd>The fields to alias</dd> <dt> string|null <code>$defaultAlias</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The default alias</dd> </dl>  <h4>Returns</h4>  array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_eagerLoaded"> <span class="name">eagerLoaded()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#210-231" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">eagerLoaded( boolean|null $value = null )</pre>  <p>Sets the query instance to be an eager loaded query. If no argument is passed, the current configured query <code>_eagerLoaded</code> value is returned.</p> <h4>Deprecated</h4>  3.5.0 Use isEagerLoaded() for the getter part instead.<br>  <h4>Parameters</h4>  <dl> <dt> boolean|null <code>$value</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>Whether or not to eager load.</dd> </dl>  <h4>Returns</h4>  <br>$this|bool<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_first"> <span class="name">first()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#453-472" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">first( )</pre>  <p>Returns the first result out of executing this query, if the query has not been executed before, it will set the limit clause to 1 for performance reasons.</p> <h3>Example:</h3> <pre data-language="php">$singleUser = $query-&gt;select(['id', 'username'])-&gt;first();</pre> <h4>Returns</h4>  <code><a href="../class-cake.datasource.entityinterface/">Cake\Datasource\EntityInterface</a></code>|array|null<br>The first result from the ResultSet.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_firstOrFail"> <span class="name">firstOrFail()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#474-493" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">firstOrFail( )</pre>  <p>Get the first result from the executing query or raise an exception.</p> <h4>Returns</h4>  <code><a href="../class-cake.datasource.entityinterface/">Cake\Datasource\EntityInterface</a></code>|array<br>The first result from the ResultSet.<br>  <h4>Throws</h4>  <code><a href="../class-cake.datasource.exception.recordnotfoundexception/">Cake\Datasource\Exception\RecordNotFoundException</a></code><br>When there is no first record.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_formatResults"> <span class="name">formatResults()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#378-441" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">formatResults( callable $formatter = null , boolean|integer $mode = 0 )</pre>  <p>Registers a new formatter callback function that is to be executed when trying to fetch the results from the database.</p> <p>Formatting callbacks will get a first parameter, an object implementing <code>\Cake\Collection\CollectionInterface</code>, that can be traversed and modified at will.</p> <p>Callbacks are required to return an iterator object, which will be used as the return value for this query's result. Formatter functions are applied after all the <code>MapReduce</code> routines for this query have been executed.</p> <p>If the first argument is set to null, it will return the list of previously registered format routines. This is deprecated as of 3.6.0 - use getResultFormatters() instead.</p> <p>If the second argument is set to true, it will erase previous formatters and replace them with the passed first argument.</p> <h3>Example:</h3> <pre data-language="php">// Return all results from the table indexed by id
$query-&gt;select(['id', 'name'])-&gt;formatResults(function ($results) {
  return $results-&gt;indexBy('id');
});

// Add a new column to the ResultSet
$query-&gt;select(['name', 'birth_date'])-&gt;formatResults(function ($results) {
  return $results-&gt;map(function ($row) {
    $row['age'] = $row['birth_date']-&gt;diff(new DateTime)-&gt;y;
    return $row;
  });
});</pre> <h4>Parameters</h4>  <dl> <dt> callable <code>$formatter</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The formatting callable.</dd> <dt> boolean|integer <code>$mode</code> <span class="label">optional</span> <span class="php-num">0</span> </dt> <dd>Whether or not to overwrite, append or prepend the formatter.</dd> </dl>  <h4>Returns</h4>  <br>$this|array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getIterator"> <span class="name">getIterator()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#139-150" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getIterator( )</pre>  <p>Executes this query and returns a results iterator. This function is required for implementing the IteratorAggregate interface and allows the query to be iterated without having to call execute() manually, thus making it look like a result set instead of the query itself.</p> <h4>Returns</h4>  Iterator<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getMapReducers"> <span class="name">getMapReducers()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#368-376" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getMapReducers( )</pre>  <p>Returns the list of previously registered map reduce routines.</p> <h4>Returns</h4>  array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getOptions"> <span class="name">getOptions()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#495-513" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getOptions( )</pre>  <p>Returns an array with the custom options that were applied to this query and that were not already processed by another method in this class.</p> <h3>Example:</h3> <pre data-language="php">$query-&gt;applyOptions(['doABarrelRoll' =&gt; true, 'fields' =&gt; ['id', 'name']);
 $query-&gt;getOptions(); // Returns ['doABarrelRoll' =&gt; true]</pre> <h4>Returns</h4>  array<br>  <h4>See</h4>  <p>\Cake\Datasource\QueryInterface::applyOptions() to read about the options that will be processed by this class and not returned by this function</p>
<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getRepository"> <span class="name">getRepository()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#109-118" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getRepository( )</pre>  <p>Returns the default table object that will be used by this query, that is, the table that will appear in the from clause.</p> <h4>Returns</h4>  <code><a href="../class-cake.datasource.repositoryinterface/">Cake\Datasource\RepositoryInterface</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getResultFormatters"> <span class="name">getResultFormatters()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#443-451" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getResultFormatters( )</pre>  <p>Returns the list of previously registered format routines.</p> <h4>Returns</h4>  array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_isEagerLoaded"> <span class="name">isEagerLoaded()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#200-208" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">isEagerLoaded( )</pre>  <p>Returns the current configured query <code>_eagerLoaded</code> value</p> <h4>Returns</h4>  boolean<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_mapReduce"> <span class="name">mapReduce()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#329-366" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">mapReduce( callable $mapper = null , callable $reducer = null , boolean $overwrite = false )</pre>  <p>Register a new MapReduce routine to be executed on top of the database results Both the mapper and caller callable should be invokable objects.</p> <p>The MapReduce routing will only be run when the query is executed and the first result is attempted to be fetched.</p> <p>If the first argument is set to null, it will return the list of previously registered map reduce routines. This is deprecated as of 3.6.0 - use getMapReducers() instead.</p> <p>If the third argument is set to true, it will erase previous map reducers and replace it with the arguments passed.</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$mapper</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The mapper callable.</dd> <dt> callable <code>$reducer</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The reducing function.</dd> <dt> boolean <code>$overwrite</code> <span class="label">optional</span> <span class="php-keyword1">false</span> </dt> <dd>Set to true to overwrite existing map + reduce functions.</dd> </dl>  <h4>Returns</h4>  <br>$this|array<br>  <h4>See</h4>  \Cake\Collection\Iterator\MapReduce for details on how to use emit data to the map reducer.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_repository"> <span class="name">repository()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#83-107" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">repository( Cake\Datasource\RepositoryInterface $table = null )</pre>  <p>Returns the default table object that will be used by this query, that is, the table that will appear in the from clause.</p> <p>When called with a Table argument, the default table object will be set and this query object will be returned for chaining.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.datasource.repositoryinterface/">Cake\Datasource\RepositoryInterface</a></code> <code>$table</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The default table object to use</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.datasource.repositoryinterface/">Cake\Datasource\RepositoryInterface</a></code>|<code><a href="../class-cake.datasource.querytrait/">Cake\Datasource\QueryTrait</a></code><br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_setResult"> <span class="name">setResult()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#120-137" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">setResult( Cake\Datasource\ResultSetInterface $results )</pre>  <p>Set the result set for a query.</p> <p>Setting the resultset of a query will make execute() a no-op. Instead of executing the SQL query and fetching results, the ResultSet provided to this method will be returned.</p> <p>This method is most useful when combined with results stored in a persistent cache.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.datasource.resultsetinterface/">Cake\Datasource\ResultSetInterface</a></code> <code>$results</code> </dt> <dd>The results this query should return.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_toArray"> <span class="name">toArray()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Datasource.QueryTrait.html#319-327" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">toArray( )</pre>  <p>Returns an array representation of the results after executing the query.</p> <h4>Returns</h4>  array<br>   </div>   <h2>Methods used from <a href="../class-cake.database.typemaptrait/#methods">Cake\Database\TypeMapTrait</a>
</h2> <div class="method-detail">   <h3 class="method-name" id="_defaultTypes"> <span class="name">defaultTypes()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.TypeMapTrait.html#110-128" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">defaultTypes( array $types = null )</pre>  <p>Allows setting default types when chaining query</p> <h4>Deprecated</h4>  3.4.0 Use setDefaultTypes()/getDefaultTypes() instead.<br>  <h4>Parameters</h4>  <dl> <dt> array <code>$types</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The array of types to set.</dd> </dl>  <h4>Returns</h4>  <br>$this|array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getDefaultTypes"> <span class="name">getDefaultTypes()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.TypeMapTrait.html#100-108" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getDefaultTypes( )</pre>  <p>Gets default types of current type map.</p> <h4>Returns</h4>  array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getTypeMap"> <span class="name">getTypeMap()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.TypeMapTrait.html#44-56" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">getTypeMap( )</pre>  <p>Returns the existing type map.</p> <h4>Returns</h4>  <code><a href="../class-cake.database.typemap/">Cake\Database\TypeMap</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_setDefaultTypes"> <span class="name">setDefaultTypes()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.TypeMapTrait.html#79-98" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">setDefaultTypes( array $types )</pre>  <p>Overwrite the default type mappings for fields in the implementing object.</p> <p>This method is useful if you need to set type mappings that are shared across multiple functions/expressions in a query.</p> <p>To add a default without overwriting existing ones use <code>getTypeMap()-&gt;addDefaults()</code></p> <h4>Parameters</h4>  <dl> <dt> array <code>$types</code> </dt> <dd>The array of types to set.</dd> </dl>  <h4>Returns</h4>  <br>$this<br>  <h4>See</h4>  \Cake\Database\TypeMap::setDefaults()<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_setTypeMap"> <span class="name">setTypeMap()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.TypeMapTrait.html#31-42" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">setTypeMap( array|Cake\Database\TypeMap $typeMap )</pre>  <p>Creates a new TypeMap if $typeMap is an array, otherwise exchanges it for the given one.</p> <h4>Parameters</h4>  <dl> <dt> array|<code><a href="../class-cake.database.typemap/">Cake\Database\TypeMap</a></code> <code>$typeMap</code> </dt> <dd>Creates a TypeMap if array, otherwise sets the given TypeMap</dd> </dl>  <h4>Returns</h4>  <br>$this<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_typeMap"> <span class="name">typeMap()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.Database.TypeMapTrait.html#58-77" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span> <span class="label">deprecated</span>  </h3> <pre class="method-signature" data-language="php">typeMap( array|Cake\Database\TypeMap|null $typeMap = null )</pre>  <p>Creates a new TypeMap if $typeMap is an array, otherwise returns the existing type map or exchanges it for the given one.</p> <h4>Deprecated</h4>  3.4.0 Use setTypeMap()/getTypeMap() instead.<br>  <h4>Parameters</h4>  <dl> <dt> array|<code><a href="../class-cake.database.typemap/">Cake\Database\TypeMap</a></code>|null <code>$typeMap</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>Creates a TypeMap if array, otherwise sets the given TypeMap</dd> </dl>  <h4>Returns</h4>  <br>$this|\Cake\Database\TypeMap<br>   </div>   <h2>Magic methods summary</h2> <table class="summary methods" id="magicMethods">   <h3 class="method-name"> <span class="name">append()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#55" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">append( array|Traversable $items )</pre>  <p>Appends more rows to the result of the query.</p> <h4>Parameters</h4>  <dl> <dt> array|Traversable <code>$items</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">chunk()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#67" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">chunk( $size )</pre>  <p>Groups the results in arrays of $size rows each.</p> <h4>Parameters</h4>  <dl> <dt> <code>$size</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">combine()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#56-57" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">combine( $k , $v , $g = )</pre>  <p>Returns the values of the column $v index by column $k, and grouped by $g.</p> <h4>Parameters</h4>  <dl> <dt> <code>$k</code> </dt>  <dt> <code>$v</code> </dt>  <dt> <code>$g</code> <span class="label">optional</span> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">countBy()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#48" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">countBy( string|callable $field )</pre>  <p>Returns the number of unique values for a column</p> <h4>Parameters</h4>  <dl> <dt> string|callable <code>$field</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">each()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#35" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">each( callable $c )</pre>  <p>Passes each of the query results to the callable</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$c</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">every()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#39" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">every( callable $c )</pre>  <p>Returns true if all the results pass the callable test</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$c</code> </dt>  </dl>  <h4>Returns</h4>  boolean<br>     <h3 class="method-name"> <span class="name">extract()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#43" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">extract( $field )</pre>  <p>Extracts a single column from each row</p> <h4>Parameters</h4>  <dl> <dt> <code>$field</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">filter()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#37" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">filter( callable $c = )</pre>  <p>Keeps the results using passing the callable test</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$c</code> <span class="label">optional</span> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">groupBy()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#46" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">groupBy( string|callable $field )</pre>  <p>In-memory group all results by the value of a column.</p> <h4>Parameters</h4>  <dl> <dt> string|callable <code>$field</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">indexBy()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#47" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">indexBy( string|callable $field )</pre>  <p>Returns the results indexed by the value of a column.</p> <h4>Parameters</h4>  <dl> <dt> string|callable <code>$field</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">isEmpty()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#68" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">isEmpty( )</pre>  <p>Returns true if this query found no results.</p> <h4>Returns</h4>  boolean<br>     <h3 class="method-name"> <span class="name">last()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#54" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">last( )</pre>  <p>Return the last row of the query result</p> <h4>Returns</h4>  mixed<br>     <h3 class="method-name"> <span class="name">map()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#41" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">map( callable $c )</pre>  <p>Modifies each of the results using the callable</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$c</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">max()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#44" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">max( $field , $type = )</pre>  <p>Returns the maximum value for a single column in all the results.</p> <h4>Parameters</h4>  <dl> <dt> <code>$field</code> </dt>  <dt> <code>$type</code> <span class="label">optional</span> </dt>  </dl>  <h4>Returns</h4>  mixed<br>     <h3 class="method-name"> <span class="name">min()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#45" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">min( $field , $type = )</pre>  <p>Returns the minimum value for a single column in all the results.</p> <h4>Parameters</h4>  <dl> <dt> <code>$field</code> </dt>  <dt> <code>$type</code> <span class="label">optional</span> </dt>  </dl>  <h4>Returns</h4>  mixed<br>     <h3 class="method-name"> <span class="name">nest()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#58-59" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">nest( $k , $p , $n = )</pre>  <p>Creates a tree structure by nesting the values of column $p into that with the same value for $k using $n as the nesting key.</p> <h4>Parameters</h4>  <dl> <dt> <code>$k</code> </dt>  <dt> <code>$p</code> </dt>  <dt> <code>$n</code> <span class="label">optional</span> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">reduce()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#42" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">reduce( callable $c , $zero = )</pre>  <p>Folds all the results into a single value using the callable.</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$c</code> </dt>  <dt> <code>$zero</code> <span class="label">optional</span> </dt>  </dl>  <h4>Returns</h4>  mixed<br>     <h3 class="method-name"> <span class="name">reject()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#38" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">reject( callable $c )</pre>  <p>Removes the results passing the callable test</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$c</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">sample()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#51" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">sample( $size = )</pre>  <p>In-memory shuffle the results and return a subset of them.</p> <h4>Parameters</h4>  <dl> <dt> <code>$size</code> <span class="label">optional</span> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">shuffle()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#50" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">shuffle( )</pre>  <p>In-memory randomize the order the results are returned</p> <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">skip()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#53" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">skip( integer $howMany )</pre>  <p>Skips some rows from the start of the query result.</p> <h4>Parameters</h4>  <dl> <dt> integer <code>$howMany</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">some()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#40" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">some( callable $c )</pre>  <p>Returns true if at least one of the results pass the callable test</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$c</code> </dt>  </dl>  <h4>Returns</h4>  boolean<br>     <h3 class="method-name"> <span class="name">sortBy()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#36" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">sortBy( $callback , $dir = , $type = )</pre>  <p>Sorts the query with the callback</p> <h4>Parameters</h4>  <dl> <dt> <code>$callback</code> </dt>  <dt> <code>$dir</code> <span class="label">optional</span> </dt>  <dt> <code>$type</code> <span class="label">optional</span> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">stopWhen()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#62" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">stopWhen( callable $c )</pre>  <p>Returns each row until the callable returns true.</p> <h4>Parameters</h4>  <dl> <dt> callable <code>$c</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">sumOf()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#49" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">sumOf( string|callable $field )</pre>  <p>Returns the sum of all values for a single column</p> <h4>Parameters</h4>  <dl> <dt> string|callable <code>$field</code> </dt>  </dl>  <h4>Returns</h4>  float<br>     <h3 class="method-name"> <span class="name">take()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#52" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">take( $size = , $from )</pre>  <p>In-memory limit and offset for the query results.</p> <h4>Parameters</h4>  <dl> <dt> <code>$size</code> <span class="label">optional</span> </dt>  <dt> <code>$from</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">toArray()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#60" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">toArray( )</pre>  <p>Returns a key-value array with the results of this query.</p> <h4>Returns</h4>  array<br>  <h4>Implementation of</h4> <code><a href="../class-cake.datasource.queryinterface/#_toArray">Cake\Datasource\QueryInterface::toArray()</a></code>    <h3 class="method-name"> <span class="name">toList()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#61" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">toList( )</pre>  <p>Returns a numerically indexed array with the results of this query.</p> <h4>Returns</h4>  array<br>     <h3 class="method-name"> <span class="name">zip()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#63-64" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">zip( array|Traversable $c )</pre>  <p>Returns the first result of both the query and $c in an array, then the second results and so on.</p> <h4>Parameters</h4>  <dl> <dt> array|Traversable <code>$c</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>     <h3 class="method-name"> <span class="name">zipWith()</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#65-66" title="Go to source code" class="source" target="_blank">source</a> <span class="label">public</span>  </h3> <pre class="method-signature" data-language="php">zipWith( $collections , callable $callable )</pre>  <p>Returns each of the results out of calling $c with the first rows of the query and each of the items, then the second rows and so on.</p> <h4>Parameters</h4>  <dl> <dt> <code>$collections</code> </dt>  <dt> callable <code>$callable</code> </dt>  </dl>  <h4>Returns</h4>  <code><a href="../class-cake.collection.collectioninterface/">Cake\Collection\CollectionInterface</a></code><br>   </table>   <h2>Magic methods inherited from <a href="../class-cake.datasource.queryinterface/#methods">Cake\Datasource\QueryInterface</a>
</h2> <table class="summary inherited"> <tr> <td><code><a href="../class-cake.datasource.queryinterface/#m_getRepository">getRepository()</a></code></td> </tr> </table>   <h2>Properties detail</h2> <div class="property-detail">  <h3 class="property-name" id="$_autoFields"> <span class="name">$_autoFields</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#108-114" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> boolean </p>  <p>Tracks whether or not the original query should include fields from the top level table.</p>  </div> <div class="property-detail">  <h3 class="property-name" id="$_beforeFindFired"> <span class="name">$_beforeFindFired</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#139-144" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> boolean </p>  <p>True if the beforeFind event has already been triggered for this query</p> <div> <pre data-language="php">false</pre> </div>  </div> <div class="property-detail">  <h3 class="property-name" id="$_counter"> <span class="name">$_counter</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#123-129" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> callable </p>  <p>A callable function that can be used to calculate the total amount of records this query will match when not using <code>limit</code></p>  </div> <div class="property-detail">  <h3 class="property-name" id="$_eagerLoader"> <span class="name">$_eagerLoader</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#131-137" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> <code><a href="../class-cake.orm.eagerloader/">Cake\ORM\EagerLoader</a></code> </p>  <p>Instance of a class responsible for storing association containments and for eager loading them when this query is executed</p>  </div> <div class="property-detail">  <h3 class="property-name" id="$_hasFields"> <span class="name">$_hasFields</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#100-106" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> boolean </p>  <p>Whether the user select any fields before being executed, this is used to determined if any fields should be automatically be selected.</p>  </div> <div class="property-detail">  <h3 class="property-name" id="$_hydrate"> <span class="name">$_hydrate</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#116-121" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> boolean </p>  <p>Whether to hydrate results into entity objects</p> <div> <pre data-language="php">true</pre> </div>  </div> <div class="property-detail">  <h3 class="property-name" id="$_resultsCount"> <span class="name">$_resultsCount</span><a href="https://api.cakephp.org/3.8/source-class-Cake.ORM.Query.html#146-153" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> integer|null </p>  <p>The COUNT(*) for the query.</p> <p>When set, count query execution will be bypassed.</p>  </div>
<div class="_attribution">
  <p class="_attribution-p">
     2005present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/3.8/class-Cake.ORM.Query.html" class="_attribution-link" target="_blank">https://api.cakephp.org/3.8/class-Cake.ORM.Query.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>


<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Module API - Cypress - W3cubDocs</title>
  
  <meta name="description" content="You can require Cypress as a node module from your application under test. This can be useful when you want to access to the test results directly &hellip;">
  <meta name="keywords" content="module, api, -, cypress">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/cypress/guides/guides/module-api/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" integrity="sha256-6/DH7X+2hvUPElJfGsvzm+tgIpmM9zjbYxnpsr6gR1A=" crossorigin="anonymous" href="/assets/application-ebf0c7ed7fb686f50f12525f1acbf39beb6022998cf738db6319e9b2bea04750.css">
  <script type="text/javascript" src="/assets/application-db285287b40ed28fac520fcfd75d7d874692b647b5b5e05968c741dda5de4148.js" integrity="sha256-2yhSh7QO0o+sUg/P1119h0aStke1teBZaMdB3aXeQUg=" crossorigin="anonymous"></script>
  <script src="/json/cypress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cypress/" class="_nav-link" title="" style="margin-left:0;">Cypress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cypress">
				
				
<h1 class="article-title" itemprop="name">Module API</h1>  <div class="article-content" itemprop="articleBody"> <p>You can require Cypress as a node module from your application under test. This can be useful when you want to access to the test results directly after the run. With this workflow, for example, you can:</p> <ul> <li>Send a notification about failing tests with included screenshot images</li> <li>Rerun a single failing spec file</li> <li>Kick off other builds or scripts</li> </ul> <h2 id="cypress-run" class="article-heading">
<code>cypress.run()</code>
</h2>
<p>Runs Cypress tests and resolve with all test results. See the <a href="https://github.com/cypress-io/cypress-example-recipes#cypress-module-api" target="_blank" rel="noopener">Cypress Module API recipe</a>.</p> <h3 id="Options" class="article-heading">
Options:
</h3>
<p>Just like the <a href="../command-line/">Command Line options</a> for <code>cypress run</code>, you can pass options that modify how Cypress runs.</p> <table> <thead> <tr> <th>Option</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>browser</code></td> <td><em>String</em></td> <td>Specify different browser to run tests in, either by name or by filesystem path</td> </tr> <tr> <td><code>ciBuildId</code></td> <td><em>String</em></td> <td>Specify a unique identifier for a run to enable <a href="../parallelization/#Grouping-test-runs">grouping</a> or <a href="../parallelization/">parallelization</a>
</td> </tr> <tr> <td><code>config</code></td> <td><em>Object</em></td> <td>Specify <a href="../../references/configuration/">configuration</a>
</td> </tr> <tr> <td><code>env</code></td> <td><em>Object</em></td> <td>Specify <a href="../environment-variables/">environment variables</a>
</td> </tr> <tr> <td><code>group</code></td> <td><em>String</em></td> <td>
<a href="../parallelization/#Grouping-test-runs">Group</a> recorded tests together under a single run</td> </tr> <tr> <td><code>headed</code></td> <td><em>Boolean</em></td> <td>Display the Electron browser instead of running headlessly</td> </tr> <tr> <td><code>key</code></td> <td><em>String</em></td> <td>Specify your secret record key</td> </tr> <tr> <td><code>noExit</code></td> <td><em>Boolean</em></td> <td>Keep Cypress open after all tests run</td> </tr> <tr> <td><code>parallel</code></td> <td><em>Boolean</em></td> <td>Run recorded specs in <a href="../parallelization/">parallel</a> across multiple machines</td> </tr> <tr> <td><code>port</code></td> <td><em>Number</em></td> <td>Override default port</td> </tr> <tr> <td><code>project</code></td> <td><em>String</em></td> <td>Path to a specific project</td> </tr> <tr> <td><code>record</code></td> <td><em>Boolean</em></td> <td>Whether to record the test run</td> </tr> <tr> <td><code>reporter</code></td> <td><em>String</em></td> <td>Specify a <a href="../../tooling/reporters/">Mocha reporter</a>
</td> </tr> <tr> <td><code>reporterOptions</code></td> <td><em>Object</em></td> <td>Specify <a href="../../tooling/reporters/">Mocha reporter</a> options</td> </tr> <tr> <td><code>spec</code></td> <td><em>String</em></td> <td>Specify the specs to run</td> </tr> </tbody> </table> <pre class=" language-javascript" data-language="javascript">const cypress = require('cypress')

cypress.run({
  reporter: 'junit',
  browser: 'chrome',
  config: {
    baseUrl: 'http://localhost:8080',
    chromeWebSecurity: false,
    video: true,
  },
  env: {
    foo: 'bar',
    baz: 'quux',
  }
})
</pre> <h3 id="Example" class="article-heading">
Example:
</h3>
<p>Here is an example of programmatically running a spec file:</p> <pre class=" language-js" data-language="javascript">const cypress = require('cypress')

cypress.run({
  spec: './cypress/integration/examples/actions.spec.js'
})
.then((results) =&gt; {
  console.log(results)
})
.catch((err) =&gt; {
  console.error(err)
})
</pre> <p><code>cypress.run()</code> returns a <code>Promise</code> that resolves with an object containing the tests results. A typical run could return something like this:</p> <pre class=" language-json" data-language="javascript">{
  "cypressVersion": "3.0.2",
  "endedTestsAt": "2018-07-11T17:53:35.675Z",
  "browserName": "electron",
  "browserPath": "path/to/browser",
  "browserVersion": "59.0.3071.115",
  "config": {...},
  "osName": "darwin",
  "osVersion": "14.5.0",
  "runs": [{
    "error": null,
    "hooks": [...],
    "reporter": "spec",
    "reporterStats": {...},
    "screenshots": [],
    "shouldUploadVideo": true,
    "spec": {...},
    "stats": {...},
    "tests": [...],
    "video": "User/janelane/my-app/cypress/videos/abc123.mp4"
  }],
  "runUrl": "https://dashboard.cypress.io/projects/def456/runs/12",
  "startedTestsAt": "2018-07-11T17:53:35.463Z",
  "totalDuration": 212,
  "totalFailed": 1,
  "totalPassed": 0,
  "totalPending": 0,
  "totalSkipped": 12,
  "totalSuites": 8,
  "totalTests": 13,
}
</pre> <p>Find the TypeScript definition for the results object in the <a href="https://github.com/cypress-io/cypress/tree/develop/cli/types" target="_blank" rel="noopener"><code>cypress/cli/types</code> folder</a>.</p> <p>Even when tests fail, the <code>Promise</code> still resolves with the test results. The <code>Promise</code> is only rejected if Cypress cannot run for some reason; for example if a binary has not been installed or it cannot find a module dependency. In that case, the <code>Promise</code> will be rejected with a detailed error.</p> <h2 id="cypress-open" class="article-heading">
<code>cypress.open()</code>
</h2>
<h3 id="Options-1" class="article-heading">
Options
</h3>
<p>Just like the <a href="../command-line/">Command Line options</a>, you can pass options that modify how Cypress runs.</p> <table> <thead> <tr> <th>Option</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>browser</code></td> <td><em>String</em></td> <td>Specify a filesystem path to a custom browser</td> </tr> <tr> <td><code>config</code></td> <td><em>Options</em></td> <td>Specify <a href="../../references/configuration/">configuration</a>
</td> </tr> <tr> <td><code>detached</code></td> <td><em>Boolean</em></td> <td>Open Cypress in detached mode</td> </tr> <tr> <td><code>env</code></td> <td><em>Object</em></td> <td>Specify <a href="../environment-variables/">environment variables</a>
</td> </tr> <tr> <td><code>global</code></td> <td><em>Boolean</em></td> <td>Run in global mode</td> </tr> <tr> <td><code>port</code></td> <td><em>Number</em></td> <td>Override default port</td> </tr> <tr> <td><code>project</code></td> <td><em>String</em></td> <td>Path to a specific project</td> </tr> </tbody> </table> <h3 id="Example-1" class="article-heading">
Example
</h3>
<pre class=" language-javascript" data-language="javascript">const cypress = require('cypress')

cypress.open()
</pre> </div>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2017 Cypress.io<br>Licensed under the MIT License.<br>
    <a href="https://docs.cypress.io/guides/guides/module-api.html" class="_attribution-link" target="_blank">https://docs.cypress.io/guides/guides/module-api.html</a>
  </p>
</div>

				
			</div>
			<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
